{"version":3,"file":"openlogin.esm.js","sources":["../src/constants.ts","../src/loglevel.ts","../src/utils.ts","../src/Modal.ts","../src/MemoryStore.ts","../src/OpenLoginStore.ts","../src/Provider.ts","../src/OpenLogin.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["modalDOMElementID","storeKey","UX_MODE","POPUP","REDIRECT","OPENLOGIN_METHOD","LOGIN","LOGOUT","CHECK_3PC_SUPPORT","SET_PID_DATA","GET_DATA","ALLOWED_INTERACTIONS","JRPC","OPENLOGIN_NETWORK","MAINNET","TESTNET","CYAN","DEVELOPMENT","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","WEBAUTHN","JWT","MFA_LEVELS","DEFAULT","OPTIONAL","MANDATORY","loglevel","setLevel","getLogger","documentReady","Promise","resolve","document","readyState","addEventListener","htmlToElement","html","template","window","createElement","trimmedHtml","trim","innerHTML","content","firstChild","whitelistUrl","clientId","appKey","origin","appKeyBuf","Buffer","from","padStart","base64url","encode","getPublic","Error","sig","sign","keccak","update","digest","getHashQueryParams","replaceUrl","result","url","URL","location","href","searchParams","forEach","value","key","queryResult","get","queryParams","JSON","parse","safeatob","Object","keys","error","log","hash","substring","hashUrl","hashResult","hashParams","cleanUrl","pathname","history","replaceState","awaitReq","id","windowRef","reject","closedByHandler","closedMonitor","setInterval","closed","clearInterval","handler","ev","pid","data","removeEventListener","close","constructURL","params","baseURL","query","append","h","toString","storageAvailable","type","storageExists","storageLength","storage","length","x","setItem","removeItem","code","name","sessionStorageAvailable","localStorageAvailable","preloadIframe","openloginIframeHtml","crossOrigin","rel","relList","supports","head","appendChild","getPopupFeatures","dualScreenLeft","screenLeft","undefined","screenX","dualScreenTop","screenTop","screenY","w","width","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","Math","abs","top","features","handleStream","handle","eventName","handlerWrapper","chunk","removeListener","on","Modal","constructor","modalUrl","init","initIFrame","setupStream","iframeElem","mux","setupMultiplex","PostMessageStream","target","targetWindow","contentWindow","targetOrigin","verifierStream","createStream","src","documentIFrameElem","getElementById","remove","info","modalZIndex","_hideModal","body","onload","initialized","_showModal","style","display","position","right","bottom","border","setAttribute","entries","map","k","v","join","_prompt","whiteLabel","loginConfig","cb","modalHandler","write","cleanup","MemoryStore","getItem","store","OpenLoginStore","resetStore","getInstance","instance","localStorage","toJSON","currStore","getStore","stringify","set","Provider","SafeEventEmitter","iframeUrl","rpcStream","JRPCConnection","createStreamMiddleware","pump","stream","rpcEngine","JRPCEngine","push","createIdRemapMiddleware","middleware","_rpcRequest","payload","callback","jsonrpc","randomId","OpenLogin","options","provider","Proxy","deleteProperty","_iframeUrl","network","modal","initState","no3PC","_startUrl","_popupUrl","redirectUrl","protocol","host","uxMode","replaceUrlOnRedirect","originData","privKey","state","startUrl","popupUrl","support3PC","all","updateOriginData","_syncState","res","_check3PCSupport","_getData","filteredOriginData","whitelist","getWhitelist","getWhiteLabel","post","project_id","signed_urls","_","_fastLogin","defaultParams","loginParams","request","fastLogin","method","allowedInteractions","login","loginProvider","_selectedLogin","_modal","logout","logoutParams","_clientId","args","session","userData","timestamp","Date","now","_user","_userSig","_userData","_originData","_whiteLabelData","_loginConfig","includes","_jrpcRequest","_origin","_setPIDData","setTimeout","b64Params","jsonToBase64","_pid","_method","u","open","Array","isArray","getRpcPromiseCallback","newState","cancel","selectedLoginResponse","merge","_cleanup","encrypt","message","privateKey","exec","decrypt","ciphertext","getUserInfo","storeData","userInfo","email","profileImage","aggregateVerifier","verifier","verifierId","typeOfLogin","getEncodedLoginUrl","dataObject"],"mappings":"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"}