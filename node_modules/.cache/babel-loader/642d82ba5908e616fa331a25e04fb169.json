{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function withTimeout(sync, timeout, timeoutError) {\n  var _this = this;\n  if (timeoutError === void 0) {\n    timeoutError = new Error('timeout');\n  }\n  return {\n    acquire: function () {\n      return new Promise(function (resolve, reject) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var isTimeout, ticket, release;\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                isTimeout = false;\n                setTimeout(function () {\n                  isTimeout = true;\n                  reject(timeoutError);\n                }, timeout);\n                return [4 /*yield*/, sync.acquire()];\n              case 1:\n                ticket = _a.sent();\n                if (isTimeout) {\n                  release = Array.isArray(ticket) ? ticket[1] : ticket;\n                  release();\n                } else {\n                  resolve(ticket);\n                }\n                return [2 /*return*/];\n            }\n          });\n        });\n      });\n    },\n\n    runExclusive: function (callback) {\n      return __awaiter(this, void 0, void 0, function () {\n        var release, ticket;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              release = function () {\n                return undefined;\n              };\n              _a.label = 1;\n            case 1:\n              _a.trys.push([1,, 7, 8]);\n              return [4 /*yield*/, this.acquire()];\n            case 2:\n              ticket = _a.sent();\n              if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n              release = ticket[1];\n              return [4 /*yield*/, callback(ticket[0])];\n            case 3:\n              return [2 /*return*/, _a.sent()];\n            case 4:\n              release = ticket;\n              return [4 /*yield*/, callback()];\n            case 5:\n              return [2 /*return*/, _a.sent()];\n            case 6:\n              return [3 /*break*/, 8];\n            case 7:\n              release();\n              return [7 /*endfinally*/];\n            case 8:\n              return [2 /*return*/];\n          }\n        });\n      });\n    },\n\n    release: function () {\n      sync.release();\n    },\n    isLocked: function () {\n      return sync.isLocked();\n    }\n  };\n}","map":{"version":3,"names":["__awaiter","__generator","withTimeout","sync","timeout","timeoutError","_this","Error","acquire","Promise","resolve","reject","isTimeout","ticket","release","_a","label","setTimeout","sent","Array","isArray","runExclusive","callback","undefined","trys","push","isLocked"],"sources":["/Users/shivamsoni/Desktop/router/pingspong/Ping-Pong/node_modules/eth-json-rpc-filters/node_modules/async-mutex/es6/withTimeout.js"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                var isTimeout, ticket, release;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 1:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                resolve(ticket);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return __awaiter(this, void 0, void 0, function () {\n                var release, ticket;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        release: function () {\n            sync.release();\n        },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}