{"ast":null,"code":"\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UnsetOp = exports.SetOp = exports.RemoveOp = exports.RelationOp = exports.Op = exports.IncrementOp = exports.AddUniqueOp = exports.AddOp = void 0;\nexports.opFromJSON = opFromJSON;\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\nvar _splice = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/splice\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _arrayContainsObject = _interopRequireDefault(require(\"./arrayContainsObject\"));\nvar _decode = _interopRequireDefault(require(\"./decode\"));\nvar _encode = _interopRequireDefault(require(\"./encode\"));\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\nvar _unique = _interopRequireDefault(require(\"./unique\"));\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction opFromJSON(json\n/*: { [key: string]: any }*/) /*: ?Op*/\n{\n  if (!json || !json.__op) {\n    return null;\n  }\n  switch (json.__op) {\n    case 'Delete':\n      return new UnsetOp();\n    case 'Increment':\n      return new IncrementOp(json.amount);\n    case 'Add':\n      return new AddOp((0, _decode.default)(json.objects));\n    case 'AddUnique':\n      return new AddUniqueOp((0, _decode.default)(json.objects));\n    case 'Remove':\n      return new RemoveOp((0, _decode.default)(json.objects));\n    case 'AddRelation':\n      {\n        var toAdd = (0, _decode.default)(json.objects);\n        if (!(0, _isArray.default)(toAdd)) {\n          return new RelationOp([], []);\n        }\n        return new RelationOp(toAdd, []);\n      }\n    case 'RemoveRelation':\n      {\n        var toRemove = (0, _decode.default)(json.objects);\n        if (!(0, _isArray.default)(toRemove)) {\n          return new RelationOp([], []);\n        }\n        return new RelationOp([], toRemove);\n      }\n    case 'Batch':\n      {\n        var _toAdd = [];\n        var _toRemove = [];\n        for (var i = 0; i < json.ops.length; i++) {\n          if (json.ops[i].__op === 'AddRelation') {\n            _toAdd = (0, _concat.default)(_toAdd).call(_toAdd, (0, _decode.default)(json.ops[i].objects));\n          } else if (json.ops[i].__op === 'RemoveRelation') {\n            _toRemove = (0, _concat.default)(_toRemove).call(_toRemove, (0, _decode.default)(json.ops[i].objects));\n          }\n        }\n        return new RelationOp(_toAdd, _toRemove);\n      }\n    default:\n      return null;\n  }\n}\nvar Op = /*#__PURE__*/function () {\n  function Op() {\n    (0, _classCallCheck2.default)(this, Op);\n  }\n  (0, _createClass2.default)(Op, [{\n    key: \"applyTo\",\n    value:\n    // Empty parent class\n    function () /*: mixed*/\n    {}\n    /* eslint-disable-line no-unused-vars */\n  }, {\n    key: \"mergeWith\",\n    value: function () /*: ?Op*/\n    {}\n    /* eslint-disable-line no-unused-vars */\n  }, {\n    key: \"toJSON\",\n    value: function () /*: mixed*/\n    {}\n  }]);\n  return Op;\n}();\nexports.Op = Op;\nvar SetOp = /*#__PURE__*/function (_Op) {\n  (0, _inherits2.default)(SetOp, _Op);\n  var _super = _createSuper(SetOp);\n  function SetOp(value\n  /*: mixed*/) {\n    var _this;\n    (0, _classCallCheck2.default)(this, SetOp);\n    _this = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_value\", void 0);\n    _this._value = value;\n    return _this;\n  }\n  (0, _createClass2.default)(SetOp, [{\n    key: \"applyTo\",\n    value: function () /*: mixed*/\n    {\n      return this._value;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function () /*: SetOp*/\n    {\n      return new SetOp(this._value);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function (offline\n    /*:: ?: boolean*/) {\n      return (0, _encode.default)(this._value, false, true, undefined, offline);\n    }\n  }]);\n  return SetOp;\n}(Op);\nexports.SetOp = SetOp;\nvar UnsetOp = /*#__PURE__*/function (_Op2) {\n  (0, _inherits2.default)(UnsetOp, _Op2);\n  var _super2 = _createSuper(UnsetOp);\n  function UnsetOp() {\n    (0, _classCallCheck2.default)(this, UnsetOp);\n    return _super2.apply(this, arguments);\n  }\n  (0, _createClass2.default)(UnsetOp, [{\n    key: \"applyTo\",\n    value: function () {\n      return undefined;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function () /*: UnsetOp*/\n    {\n      return new UnsetOp();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function () /*: { __op: string }*/\n    {\n      return {\n        __op: 'Delete'\n      };\n    }\n  }]);\n  return UnsetOp;\n}(Op);\nexports.UnsetOp = UnsetOp;\nvar IncrementOp = /*#__PURE__*/function (_Op3) {\n  (0, _inherits2.default)(IncrementOp, _Op3);\n  var _super3 = _createSuper(IncrementOp);\n  function IncrementOp(amount\n  /*: number*/) {\n    var _this2;\n    (0, _classCallCheck2.default)(this, IncrementOp);\n    _this2 = _super3.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"_amount\", void 0);\n    if (typeof amount !== 'number') {\n      throw new TypeError('Increment Op must be initialized with a numeric amount.');\n    }\n    _this2._amount = amount;\n    return _this2;\n  }\n  (0, _createClass2.default)(IncrementOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: ?mixed*/) /*: number*/\n    {\n      if (typeof value === 'undefined') {\n        return this._amount;\n      }\n      if (typeof value !== 'number') {\n        throw new TypeError('Cannot increment a non-numeric value.');\n      }\n      return this._amount + value;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/) /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._amount);\n      }\n      if (previous instanceof IncrementOp) {\n        return new IncrementOp(this.applyTo(previous._amount));\n      }\n      throw new Error('Cannot merge Increment Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function () /*: { __op: string, amount: number }*/\n    {\n      return {\n        __op: 'Increment',\n        amount: this._amount\n      };\n    }\n  }]);\n  return IncrementOp;\n}(Op);\nexports.IncrementOp = IncrementOp;\nvar AddOp = /*#__PURE__*/function (_Op4) {\n  (0, _inherits2.default)(AddOp, _Op4);\n  var _super4 = _createSuper(AddOp);\n  function AddOp(value\n  /*: mixed | Array<mixed>*/) {\n    var _this3;\n    (0, _classCallCheck2.default)(this, AddOp);\n    _this3 = _super4.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this3), \"_value\", void 0);\n    _this3._value = (0, _isArray.default)(value) ? value : [value];\n    return _this3;\n  }\n  (0, _createClass2.default)(AddOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed*/) /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return this._value;\n      }\n      if ((0, _isArray.default)(value)) {\n        return (0, _concat.default)(value).call(value, this._value);\n      }\n      throw new Error('Cannot add elements to a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/) /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._value);\n      }\n      if (previous instanceof AddOp) {\n        return new AddOp(this.applyTo(previous._value));\n      }\n      throw new Error('Cannot merge Add Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function () /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'Add',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return AddOp;\n}(Op);\nexports.AddOp = AddOp;\nvar AddUniqueOp = /*#__PURE__*/function (_Op5) {\n  (0, _inherits2.default)(AddUniqueOp, _Op5);\n  var _super5 = _createSuper(AddUniqueOp);\n  function AddUniqueOp(value\n  /*: mixed | Array<mixed>*/) {\n    var _this4;\n    (0, _classCallCheck2.default)(this, AddUniqueOp);\n    _this4 = _super5.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this4), \"_value\", void 0);\n    _this4._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\n    return _this4;\n  }\n  (0, _createClass2.default)(AddUniqueOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed | Array<mixed>*/) /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return this._value || [];\n      }\n      if ((0, _isArray.default)(value)) {\n        var _context;\n        var toAdd = [];\n        (0, _forEach.default)(_context = this._value).call(_context, function (v) {\n          if (v instanceof _ParseObject.default) {\n            if (!(0, _arrayContainsObject.default)(value, v)) {\n              toAdd.push(v);\n            }\n          } else {\n            if ((0, _indexOf.default)(value).call(value, v) < 0) {\n              toAdd.push(v);\n            }\n          }\n        });\n        return (0, _concat.default)(value).call(value, toAdd);\n      }\n      throw new Error('Cannot add elements to a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/) /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._value);\n      }\n      if (previous instanceof AddUniqueOp) {\n        return new AddUniqueOp(this.applyTo(previous._value));\n      }\n      throw new Error('Cannot merge AddUnique Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function () /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'AddUnique',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return AddUniqueOp;\n}(Op);\nexports.AddUniqueOp = AddUniqueOp;\nvar RemoveOp = /*#__PURE__*/function (_Op6) {\n  (0, _inherits2.default)(RemoveOp, _Op6);\n  var _super6 = _createSuper(RemoveOp);\n  function RemoveOp(value\n  /*: mixed | Array<mixed>*/) {\n    var _this5;\n    (0, _classCallCheck2.default)(this, RemoveOp);\n    _this5 = _super6.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this5), \"_value\", void 0);\n    _this5._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\n    return _this5;\n  }\n  (0, _createClass2.default)(RemoveOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed | Array<mixed>*/) /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return [];\n      }\n      if ((0, _isArray.default)(value)) {\n        // var i = value.indexOf(this._value);\n        var removed = (0, _concat.default)(value).call(value, []);\n        for (var i = 0; i < this._value.length; i++) {\n          var index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\n          while (index > -1) {\n            (0, _splice.default)(removed).call(removed, index, 1);\n            index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\n          }\n          if (this._value[i] instanceof _ParseObject.default && this._value[i].id) {\n            for (var j = 0; j < removed.length; j++) {\n              if (removed[j] instanceof _ParseObject.default && this._value[i].id === removed[j].id) {\n                (0, _splice.default)(removed).call(removed, j, 1);\n                j--;\n              }\n            }\n          }\n        }\n        return removed;\n      }\n      throw new Error('Cannot remove elements from a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/) /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n      if (previous instanceof UnsetOp) {\n        return new UnsetOp();\n      }\n      if (previous instanceof RemoveOp) {\n        var _context2;\n        var uniques = (0, _concat.default)(_context2 = previous._value).call(_context2, []);\n        for (var i = 0; i < this._value.length; i++) {\n          if (this._value[i] instanceof _ParseObject.default) {\n            if (!(0, _arrayContainsObject.default)(uniques, this._value[i])) {\n              uniques.push(this._value[i]);\n            }\n          } else {\n            if ((0, _indexOf.default)(uniques).call(uniques, this._value[i]) < 0) {\n              uniques.push(this._value[i]);\n            }\n          }\n        }\n        return new RemoveOp(uniques);\n      }\n      throw new Error('Cannot merge Remove Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function () /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'Remove',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return RemoveOp;\n}(Op);\nexports.RemoveOp = RemoveOp;\nvar RelationOp = /*#__PURE__*/function (_Op7) {\n  (0, _inherits2.default)(RelationOp, _Op7);\n  var _super7 = _createSuper(RelationOp);\n  function RelationOp(adds\n  /*: Array<ParseObject | string>*/, removes\n  /*: Array<ParseObject | string>*/) {\n    var _this6;\n    (0, _classCallCheck2.default)(this, RelationOp);\n    _this6 = _super7.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"_targetClassName\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToAdd\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToRemove\", void 0);\n    _this6._targetClassName = null;\n    if ((0, _isArray.default)(adds)) {\n      _this6.relationsToAdd = (0, _unique.default)((0, _map.default)(adds).call(adds, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\n    }\n    if ((0, _isArray.default)(removes)) {\n      _this6.relationsToRemove = (0, _unique.default)((0, _map.default)(removes).call(removes, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\n    }\n    return _this6;\n  }\n  (0, _createClass2.default)(RelationOp, [{\n    key: \"_extractId\",\n    value: function (obj\n    /*: string | ParseObject*/) /*: string*/\n    {\n      if (typeof obj === 'string') {\n        return obj;\n      }\n      if (!obj.id) {\n        throw new Error('You cannot add or remove an unsaved Parse Object from a relation');\n      }\n      if (!this._targetClassName) {\n        this._targetClassName = obj.className;\n      }\n      if (this._targetClassName !== obj.className) {\n        var _context3;\n        throw new Error((0, _concat.default)(_context3 = \"Tried to create a Relation with 2 different object types: \".concat(this._targetClassName, \" and \")).call(_context3, obj.className, \".\"));\n      }\n      return obj.id;\n    }\n  }, {\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed*/, object\n    /*:: ?: { className: string, id: ?string }*/, key\n    /*:: ?: string*/) /*: ?ParseRelation*/\n    {\n      if (!value) {\n        var _context4;\n        if (!object || !key) {\n          throw new Error('Cannot apply a RelationOp without either a previous value, or an object and a key');\n        }\n        var parent = new _ParseObject.default(object.className);\n        if (object.id && (0, _indexOf.default)(_context4 = object.id).call(_context4, 'local') === 0) {\n          parent._localId = object.id;\n        } else if (object.id) {\n          parent.id = object.id;\n        }\n        var relation = new _ParseRelation.default(parent, key);\n        relation.targetClassName = this._targetClassName;\n        return relation;\n      }\n      if (value instanceof _ParseRelation.default) {\n        if (this._targetClassName) {\n          if (value.targetClassName) {\n            if (this._targetClassName !== value.targetClassName) {\n              var _context5;\n              throw new Error((0, _concat.default)(_context5 = \"Related object must be a \".concat(value.targetClassName, \", but a \")).call(_context5, this._targetClassName, \" was passed in.\"));\n            }\n          } else {\n            value.targetClassName = this._targetClassName;\n          }\n        }\n        return value;\n      }\n      throw new Error('Relation cannot be applied to a non-relation field');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/) /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n      if (previous instanceof UnsetOp) {\n        throw new Error('You cannot modify a relation after deleting it.');\n      }\n      if (previous instanceof SetOp && previous._value instanceof _ParseRelation.default) {\n        return this;\n      }\n      if (previous instanceof RelationOp) {\n        var _context7, _context8, _context9, _context10, _context11, _context12;\n        if (previous._targetClassName && previous._targetClassName !== this._targetClassName) {\n          var _context6;\n          throw new Error((0, _concat.default)(_context6 = \"Related object must be of class \".concat(previous._targetClassName, \", but \")).call(_context6, this._targetClassName || 'null', \" was passed in.\"));\n        }\n        var newAdd = (0, _concat.default)(_context7 = previous.relationsToAdd).call(_context7, []);\n        (0, _forEach.default)(_context8 = this.relationsToRemove).call(_context8, function (r) {\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\n          if (index > -1) {\n            (0, _splice.default)(newAdd).call(newAdd, index, 1);\n          }\n        });\n        (0, _forEach.default)(_context9 = this.relationsToAdd).call(_context9, function (r) {\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\n          if (index < 0) {\n            newAdd.push(r);\n          }\n        });\n        var newRemove = (0, _concat.default)(_context10 = previous.relationsToRemove).call(_context10, []);\n        (0, _forEach.default)(_context11 = this.relationsToAdd).call(_context11, function (r) {\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\n          if (index > -1) {\n            (0, _splice.default)(newRemove).call(newRemove, index, 1);\n          }\n        });\n        (0, _forEach.default)(_context12 = this.relationsToRemove).call(_context12, function (r) {\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\n          if (index < 0) {\n            newRemove.push(r);\n          }\n        });\n        var newRelation = new RelationOp(newAdd, newRemove);\n        newRelation._targetClassName = this._targetClassName;\n        return newRelation;\n      }\n      throw new Error('Cannot merge Relation Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function () /*: { __op?: string, objects?: mixed, ops?: mixed }*/\n    {\n      var _this7 = this;\n      var idToPointer = function (id) {\n        return {\n          __type: 'Pointer',\n          className: _this7._targetClassName,\n          objectId: id\n        };\n      };\n      var adds = null;\n      var removes = null;\n      var pointers = null;\n      if (this.relationsToAdd.length > 0) {\n        var _context13;\n        pointers = (0, _map.default)(_context13 = this.relationsToAdd).call(_context13, idToPointer);\n        adds = {\n          __op: 'AddRelation',\n          objects: pointers\n        };\n      }\n      if (this.relationsToRemove.length > 0) {\n        var _context14;\n        pointers = (0, _map.default)(_context14 = this.relationsToRemove).call(_context14, idToPointer);\n        removes = {\n          __op: 'RemoveRelation',\n          objects: pointers\n        };\n      }\n      if (adds && removes) {\n        return {\n          __op: 'Batch',\n          ops: [adds, removes]\n        };\n      }\n      return adds || removes || {};\n    }\n  }]);\n  return RelationOp;\n}(Op);\nexports.RelationOp = RelationOp;","map":{"version":3,"names":["_Reflect$construct","require","_Object$defineProperty","_interopRequireDefault","exports","value","UnsetOp","SetOp","RemoveOp","RelationOp","Op","IncrementOp","AddUniqueOp","AddOp","opFromJSON","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_classCallCheck2","_createClass2","_isArray","_concat","_forEach","_indexOf","_splice","_map","_arrayContainsObject","_decode","_encode","_ParseObject","_ParseRelation","_unique","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","default","result","NewTarget","constructor","arguments","apply","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","json","__op","amount","objects","toAdd","toRemove","_toAdd","_toRemove","i","ops","length","key","_Op","_super","_this","_value","offline","undefined","_Op2","_super2","_Op3","_super3","_this2","TypeError","_amount","previous","applyTo","Error","_Op4","_super4","_this3","_Op5","_super5","_this4","_context","v","push","_Op6","_super6","_this5","removed","index","id","j","_context2","uniques","_Op7","_super7","adds","removes","_this6","_targetClassName","relationsToAdd","_extractId","relationsToRemove","obj","className","_context3","concat","object","_context4","parent","_localId","relation","targetClassName","_context5","_context7","_context8","_context9","_context10","_context11","_context12","_context6","newAdd","r","newRemove","newRelation","_this7","idToPointer","__type","objectId","pointers","_context13","_context14"],"sources":["/Users/shivamsoni/Desktop/router/pingspong/Ping-Pong/node_modules/moralis/lib/browser/ParseOp.js"],"sourcesContent":["\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.UnsetOp = exports.SetOp = exports.RemoveOp = exports.RelationOp = exports.Op = exports.IncrementOp = exports.AddUniqueOp = exports.AddOp = void 0;\nexports.opFromJSON = opFromJSON;\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _splice = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/splice\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _arrayContainsObject = _interopRequireDefault(require(\"./arrayContainsObject\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar _unique = _interopRequireDefault(require(\"./unique\"));\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction opFromJSON(json\n/*: { [key: string]: any }*/\n)\n/*: ?Op*/\n{\n  if (!json || !json.__op) {\n    return null;\n  }\n\n  switch (json.__op) {\n    case 'Delete':\n      return new UnsetOp();\n\n    case 'Increment':\n      return new IncrementOp(json.amount);\n\n    case 'Add':\n      return new AddOp((0, _decode.default)(json.objects));\n\n    case 'AddUnique':\n      return new AddUniqueOp((0, _decode.default)(json.objects));\n\n    case 'Remove':\n      return new RemoveOp((0, _decode.default)(json.objects));\n\n    case 'AddRelation':\n      {\n        var toAdd = (0, _decode.default)(json.objects);\n\n        if (!(0, _isArray.default)(toAdd)) {\n          return new RelationOp([], []);\n        }\n\n        return new RelationOp(toAdd, []);\n      }\n\n    case 'RemoveRelation':\n      {\n        var toRemove = (0, _decode.default)(json.objects);\n\n        if (!(0, _isArray.default)(toRemove)) {\n          return new RelationOp([], []);\n        }\n\n        return new RelationOp([], toRemove);\n      }\n\n    case 'Batch':\n      {\n        var _toAdd = [];\n        var _toRemove = [];\n\n        for (var i = 0; i < json.ops.length; i++) {\n          if (json.ops[i].__op === 'AddRelation') {\n            _toAdd = (0, _concat.default)(_toAdd).call(_toAdd, (0, _decode.default)(json.ops[i].objects));\n          } else if (json.ops[i].__op === 'RemoveRelation') {\n            _toRemove = (0, _concat.default)(_toRemove).call(_toRemove, (0, _decode.default)(json.ops[i].objects));\n          }\n        }\n\n        return new RelationOp(_toAdd, _toRemove);\n      }\n\n    default:\n      return null;\n  }\n}\n\nvar Op = /*#__PURE__*/function () {\n  function Op() {\n    (0, _classCallCheck2.default)(this, Op);\n  }\n\n  (0, _createClass2.default)(Op, [{\n    key: \"applyTo\",\n    value: // Empty parent class\n    function ()\n    /*: mixed*/\n    {}\n    /* eslint-disable-line no-unused-vars */\n\n  }, {\n    key: \"mergeWith\",\n    value: function ()\n    /*: ?Op*/\n    {}\n    /* eslint-disable-line no-unused-vars */\n\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: mixed*/\n    {}\n  }]);\n  return Op;\n}();\n\nexports.Op = Op;\n\nvar SetOp = /*#__PURE__*/function (_Op) {\n  (0, _inherits2.default)(SetOp, _Op);\n\n  var _super = _createSuper(SetOp);\n\n  function SetOp(value\n  /*: mixed*/\n  ) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, SetOp);\n    _this = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_value\", void 0);\n    _this._value = value;\n    return _this;\n  }\n\n  (0, _createClass2.default)(SetOp, [{\n    key: \"applyTo\",\n    value: function ()\n    /*: mixed*/\n    {\n      return this._value;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function ()\n    /*: SetOp*/\n    {\n      return new SetOp(this._value);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function (offline\n    /*:: ?: boolean*/\n    ) {\n      return (0, _encode.default)(this._value, false, true, undefined, offline);\n    }\n  }]);\n  return SetOp;\n}(Op);\n\nexports.SetOp = SetOp;\n\nvar UnsetOp = /*#__PURE__*/function (_Op2) {\n  (0, _inherits2.default)(UnsetOp, _Op2);\n\n  var _super2 = _createSuper(UnsetOp);\n\n  function UnsetOp() {\n    (0, _classCallCheck2.default)(this, UnsetOp);\n    return _super2.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(UnsetOp, [{\n    key: \"applyTo\",\n    value: function () {\n      return undefined;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function ()\n    /*: UnsetOp*/\n    {\n      return new UnsetOp();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string }*/\n    {\n      return {\n        __op: 'Delete'\n      };\n    }\n  }]);\n  return UnsetOp;\n}(Op);\n\nexports.UnsetOp = UnsetOp;\n\nvar IncrementOp = /*#__PURE__*/function (_Op3) {\n  (0, _inherits2.default)(IncrementOp, _Op3);\n\n  var _super3 = _createSuper(IncrementOp);\n\n  function IncrementOp(amount\n  /*: number*/\n  ) {\n    var _this2;\n\n    (0, _classCallCheck2.default)(this, IncrementOp);\n    _this2 = _super3.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"_amount\", void 0);\n\n    if (typeof amount !== 'number') {\n      throw new TypeError('Increment Op must be initialized with a numeric amount.');\n    }\n\n    _this2._amount = amount;\n    return _this2;\n  }\n\n  (0, _createClass2.default)(IncrementOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: ?mixed*/\n    )\n    /*: number*/\n    {\n      if (typeof value === 'undefined') {\n        return this._amount;\n      }\n\n      if (typeof value !== 'number') {\n        throw new TypeError('Cannot increment a non-numeric value.');\n      }\n\n      return this._amount + value;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._amount);\n      }\n\n      if (previous instanceof IncrementOp) {\n        return new IncrementOp(this.applyTo(previous._amount));\n      }\n\n      throw new Error('Cannot merge Increment Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, amount: number }*/\n    {\n      return {\n        __op: 'Increment',\n        amount: this._amount\n      };\n    }\n  }]);\n  return IncrementOp;\n}(Op);\n\nexports.IncrementOp = IncrementOp;\n\nvar AddOp = /*#__PURE__*/function (_Op4) {\n  (0, _inherits2.default)(AddOp, _Op4);\n\n  var _super4 = _createSuper(AddOp);\n\n  function AddOp(value\n  /*: mixed | Array<mixed>*/\n  ) {\n    var _this3;\n\n    (0, _classCallCheck2.default)(this, AddOp);\n    _this3 = _super4.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this3), \"_value\", void 0);\n    _this3._value = (0, _isArray.default)(value) ? value : [value];\n    return _this3;\n  }\n\n  (0, _createClass2.default)(AddOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed*/\n    )\n    /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return this._value;\n      }\n\n      if ((0, _isArray.default)(value)) {\n        return (0, _concat.default)(value).call(value, this._value);\n      }\n\n      throw new Error('Cannot add elements to a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._value);\n      }\n\n      if (previous instanceof AddOp) {\n        return new AddOp(this.applyTo(previous._value));\n      }\n\n      throw new Error('Cannot merge Add Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'Add',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return AddOp;\n}(Op);\n\nexports.AddOp = AddOp;\n\nvar AddUniqueOp = /*#__PURE__*/function (_Op5) {\n  (0, _inherits2.default)(AddUniqueOp, _Op5);\n\n  var _super5 = _createSuper(AddUniqueOp);\n\n  function AddUniqueOp(value\n  /*: mixed | Array<mixed>*/\n  ) {\n    var _this4;\n\n    (0, _classCallCheck2.default)(this, AddUniqueOp);\n    _this4 = _super5.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this4), \"_value\", void 0);\n    _this4._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\n    return _this4;\n  }\n\n  (0, _createClass2.default)(AddUniqueOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed | Array<mixed>*/\n    )\n    /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return this._value || [];\n      }\n\n      if ((0, _isArray.default)(value)) {\n        var _context;\n\n        var toAdd = [];\n        (0, _forEach.default)(_context = this._value).call(_context, function (v) {\n          if (v instanceof _ParseObject.default) {\n            if (!(0, _arrayContainsObject.default)(value, v)) {\n              toAdd.push(v);\n            }\n          } else {\n            if ((0, _indexOf.default)(value).call(value, v) < 0) {\n              toAdd.push(v);\n            }\n          }\n        });\n        return (0, _concat.default)(value).call(value, toAdd);\n      }\n\n      throw new Error('Cannot add elements to a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._value);\n      }\n\n      if (previous instanceof AddUniqueOp) {\n        return new AddUniqueOp(this.applyTo(previous._value));\n      }\n\n      throw new Error('Cannot merge AddUnique Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'AddUnique',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return AddUniqueOp;\n}(Op);\n\nexports.AddUniqueOp = AddUniqueOp;\n\nvar RemoveOp = /*#__PURE__*/function (_Op6) {\n  (0, _inherits2.default)(RemoveOp, _Op6);\n\n  var _super6 = _createSuper(RemoveOp);\n\n  function RemoveOp(value\n  /*: mixed | Array<mixed>*/\n  ) {\n    var _this5;\n\n    (0, _classCallCheck2.default)(this, RemoveOp);\n    _this5 = _super6.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this5), \"_value\", void 0);\n    _this5._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\n    return _this5;\n  }\n\n  (0, _createClass2.default)(RemoveOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed | Array<mixed>*/\n    )\n    /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return [];\n      }\n\n      if ((0, _isArray.default)(value)) {\n        // var i = value.indexOf(this._value);\n        var removed = (0, _concat.default)(value).call(value, []);\n\n        for (var i = 0; i < this._value.length; i++) {\n          var index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\n\n          while (index > -1) {\n            (0, _splice.default)(removed).call(removed, index, 1);\n            index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\n          }\n\n          if (this._value[i] instanceof _ParseObject.default && this._value[i].id) {\n            for (var j = 0; j < removed.length; j++) {\n              if (removed[j] instanceof _ParseObject.default && this._value[i].id === removed[j].id) {\n                (0, _splice.default)(removed).call(removed, j, 1);\n                j--;\n              }\n            }\n          }\n        }\n\n        return removed;\n      }\n\n      throw new Error('Cannot remove elements from a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new UnsetOp();\n      }\n\n      if (previous instanceof RemoveOp) {\n        var _context2;\n\n        var uniques = (0, _concat.default)(_context2 = previous._value).call(_context2, []);\n\n        for (var i = 0; i < this._value.length; i++) {\n          if (this._value[i] instanceof _ParseObject.default) {\n            if (!(0, _arrayContainsObject.default)(uniques, this._value[i])) {\n              uniques.push(this._value[i]);\n            }\n          } else {\n            if ((0, _indexOf.default)(uniques).call(uniques, this._value[i]) < 0) {\n              uniques.push(this._value[i]);\n            }\n          }\n        }\n\n        return new RemoveOp(uniques);\n      }\n\n      throw new Error('Cannot merge Remove Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'Remove',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return RemoveOp;\n}(Op);\n\nexports.RemoveOp = RemoveOp;\n\nvar RelationOp = /*#__PURE__*/function (_Op7) {\n  (0, _inherits2.default)(RelationOp, _Op7);\n\n  var _super7 = _createSuper(RelationOp);\n\n  function RelationOp(adds\n  /*: Array<ParseObject | string>*/\n  , removes\n  /*: Array<ParseObject | string>*/\n  ) {\n    var _this6;\n\n    (0, _classCallCheck2.default)(this, RelationOp);\n    _this6 = _super7.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"_targetClassName\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToAdd\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToRemove\", void 0);\n    _this6._targetClassName = null;\n\n    if ((0, _isArray.default)(adds)) {\n      _this6.relationsToAdd = (0, _unique.default)((0, _map.default)(adds).call(adds, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\n    }\n\n    if ((0, _isArray.default)(removes)) {\n      _this6.relationsToRemove = (0, _unique.default)((0, _map.default)(removes).call(removes, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\n    }\n\n    return _this6;\n  }\n\n  (0, _createClass2.default)(RelationOp, [{\n    key: \"_extractId\",\n    value: function (obj\n    /*: string | ParseObject*/\n    )\n    /*: string*/\n    {\n      if (typeof obj === 'string') {\n        return obj;\n      }\n\n      if (!obj.id) {\n        throw new Error('You cannot add or remove an unsaved Parse Object from a relation');\n      }\n\n      if (!this._targetClassName) {\n        this._targetClassName = obj.className;\n      }\n\n      if (this._targetClassName !== obj.className) {\n        var _context3;\n\n        throw new Error((0, _concat.default)(_context3 = \"Tried to create a Relation with 2 different object types: \".concat(this._targetClassName, \" and \")).call(_context3, obj.className, \".\"));\n      }\n\n      return obj.id;\n    }\n  }, {\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed*/\n    , object\n    /*:: ?: { className: string, id: ?string }*/\n    , key\n    /*:: ?: string*/\n    )\n    /*: ?ParseRelation*/\n    {\n      if (!value) {\n        var _context4;\n\n        if (!object || !key) {\n          throw new Error('Cannot apply a RelationOp without either a previous value, or an object and a key');\n        }\n\n        var parent = new _ParseObject.default(object.className);\n\n        if (object.id && (0, _indexOf.default)(_context4 = object.id).call(_context4, 'local') === 0) {\n          parent._localId = object.id;\n        } else if (object.id) {\n          parent.id = object.id;\n        }\n\n        var relation = new _ParseRelation.default(parent, key);\n        relation.targetClassName = this._targetClassName;\n        return relation;\n      }\n\n      if (value instanceof _ParseRelation.default) {\n        if (this._targetClassName) {\n          if (value.targetClassName) {\n            if (this._targetClassName !== value.targetClassName) {\n              var _context5;\n\n              throw new Error((0, _concat.default)(_context5 = \"Related object must be a \".concat(value.targetClassName, \", but a \")).call(_context5, this._targetClassName, \" was passed in.\"));\n            }\n          } else {\n            value.targetClassName = this._targetClassName;\n          }\n        }\n\n        return value;\n      }\n\n      throw new Error('Relation cannot be applied to a non-relation field');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof UnsetOp) {\n        throw new Error('You cannot modify a relation after deleting it.');\n      }\n\n      if (previous instanceof SetOp && previous._value instanceof _ParseRelation.default) {\n        return this;\n      }\n\n      if (previous instanceof RelationOp) {\n        var _context7, _context8, _context9, _context10, _context11, _context12;\n\n        if (previous._targetClassName && previous._targetClassName !== this._targetClassName) {\n          var _context6;\n\n          throw new Error((0, _concat.default)(_context6 = \"Related object must be of class \".concat(previous._targetClassName, \", but \")).call(_context6, this._targetClassName || 'null', \" was passed in.\"));\n        }\n\n        var newAdd = (0, _concat.default)(_context7 = previous.relationsToAdd).call(_context7, []);\n        (0, _forEach.default)(_context8 = this.relationsToRemove).call(_context8, function (r) {\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\n\n          if (index > -1) {\n            (0, _splice.default)(newAdd).call(newAdd, index, 1);\n          }\n        });\n        (0, _forEach.default)(_context9 = this.relationsToAdd).call(_context9, function (r) {\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\n\n          if (index < 0) {\n            newAdd.push(r);\n          }\n        });\n        var newRemove = (0, _concat.default)(_context10 = previous.relationsToRemove).call(_context10, []);\n        (0, _forEach.default)(_context11 = this.relationsToAdd).call(_context11, function (r) {\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\n\n          if (index > -1) {\n            (0, _splice.default)(newRemove).call(newRemove, index, 1);\n          }\n        });\n        (0, _forEach.default)(_context12 = this.relationsToRemove).call(_context12, function (r) {\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\n\n          if (index < 0) {\n            newRemove.push(r);\n          }\n        });\n        var newRelation = new RelationOp(newAdd, newRemove);\n        newRelation._targetClassName = this._targetClassName;\n        return newRelation;\n      }\n\n      throw new Error('Cannot merge Relation Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op?: string, objects?: mixed, ops?: mixed }*/\n    {\n      var _this7 = this;\n\n      var idToPointer = function (id) {\n        return {\n          __type: 'Pointer',\n          className: _this7._targetClassName,\n          objectId: id\n        };\n      };\n\n      var adds = null;\n      var removes = null;\n      var pointers = null;\n\n      if (this.relationsToAdd.length > 0) {\n        var _context13;\n\n        pointers = (0, _map.default)(_context13 = this.relationsToAdd).call(_context13, idToPointer);\n        adds = {\n          __op: 'AddRelation',\n          objects: pointers\n        };\n      }\n\n      if (this.relationsToRemove.length > 0) {\n        var _context14;\n\n        pointers = (0, _map.default)(_context14 = this.relationsToRemove).call(_context14, idToPointer);\n        removes = {\n          __op: 'RemoveRelation',\n          objects: pointers\n        };\n      }\n\n      if (adds && removes) {\n        return {\n          __op: 'Batch',\n          ops: [adds, removes]\n        };\n      }\n\n      return adds || removes || {};\n    }\n  }]);\n  return RelationOp;\n}(Op);\n\nexports.RelationOp = RelationOp;"],"mappings":"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"},"metadata":{},"sourceType":"script"}