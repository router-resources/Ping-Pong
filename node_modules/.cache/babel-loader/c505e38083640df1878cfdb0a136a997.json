{"ast":null,"code":"import isNode from 'detect-node';\nimport BrowserMethod from './browser.js';\nimport NodeMethod from './node.js';\nvar USE_METHOD = isNode ? NodeMethod : BrowserMethod;\nvar LISTENERS = new Set();\nvar startedListening = false;\nfunction startListening() {\n  if (startedListening) return;\n  startedListening = true;\n  USE_METHOD.add(runAll);\n}\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') throw new Error('Listener is no function');\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}","map":{"version":3,"names":["isNode","BrowserMethod","NodeMethod","USE_METHOD","LISTENERS","Set","startedListening","startListening","add","runAll","fn","Error","addReturn","remove","run","promises","forEach","push","Promise","all","removeAll","clear","getSize","size"],"sources":["/Users/shivamsoni/Desktop/router/pingspong/Ping-Pong/node_modules/unload/dist/es/index.js"],"sourcesContent":["import isNode from 'detect-node';\nimport BrowserMethod from './browser.js';\nimport NodeMethod from './node.js';\nvar USE_METHOD = isNode ? NodeMethod : BrowserMethod;\nvar LISTENERS = new Set();\nvar startedListening = false;\n\nfunction startListening() {\n  if (startedListening) return;\n  startedListening = true;\n  USE_METHOD.add(runAll);\n}\n\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') throw new Error('Listener is no function');\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}"],"mappings":"AAAA,OAAOA,MAAM,MAAM,aAAa;AAChC,OAAOC,aAAa,MAAM,cAAc;AACxC,OAAOC,UAAU,MAAM,WAAW;AAClC,IAAIC,UAAU,GAAGH,MAAM,GAAGE,UAAU,GAAGD,aAAa;AACpD,IAAIG,SAAS,GAAG,IAAIC,GAAG,EAAE;AACzB,IAAIC,gBAAgB,GAAG,KAAK;AAE5B,SAASC,cAAc,GAAG;EACxB,IAAID,gBAAgB,EAAE;EACtBA,gBAAgB,GAAG,IAAI;EACvBH,UAAU,CAACK,GAAG,CAACC,MAAM,CAAC;AACxB;AAEA,OAAO,SAASD,GAAG,CAACE,EAAE,EAAE;EACtBH,cAAc,EAAE;EAChB,IAAI,OAAOG,EAAE,KAAK,UAAU,EAAE,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;EACxEP,SAAS,CAACI,GAAG,CAACE,EAAE,CAAC;EACjB,IAAIE,SAAS,GAAG;IACdC,MAAM,EAAE,SAASA,MAAM,GAAG;MACxB,OAAOT,SAAS,CAAC,QAAQ,CAAC,CAACM,EAAE,CAAC;IAChC,CAAC;IACDI,GAAG,EAAE,SAASA,GAAG,GAAG;MAClBV,SAAS,CAAC,QAAQ,CAAC,CAACM,EAAE,CAAC;MACvB,OAAOA,EAAE,EAAE;IACb;EACF,CAAC;EACD,OAAOE,SAAS;AAClB;AACA,OAAO,SAASH,MAAM,GAAG;EACvB,IAAIM,QAAQ,GAAG,EAAE;EACjBX,SAAS,CAACY,OAAO,CAAC,UAAUN,EAAE,EAAE;IAC9BK,QAAQ,CAACE,IAAI,CAACP,EAAE,EAAE,CAAC;IACnBN,SAAS,CAAC,QAAQ,CAAC,CAACM,EAAE,CAAC;EACzB,CAAC,CAAC;EACF,OAAOQ,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;AAC9B;AACA,OAAO,SAASK,SAAS,GAAG;EAC1BhB,SAAS,CAACiB,KAAK,EAAE;AACnB;AACA,OAAO,SAASC,OAAO,GAAG;EACxB,OAAOlB,SAAS,CAACmB,IAAI;AACvB"},"metadata":{},"sourceType":"module"}