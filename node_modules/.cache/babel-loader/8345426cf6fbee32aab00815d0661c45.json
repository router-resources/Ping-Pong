{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConsensusAlgorithm = exports.ConsensusType = exports.Hardfork = exports.Chain = exports.CustomChain = void 0;\nvar events_1 = require(\"events\");\nvar crc_32_1 = require(\"crc-32\");\nvar ethereumjs_util_1 = require(\"ethereumjs-util\");\nvar chains_1 = require(\"./chains\");\nvar hardforks_1 = require(\"./hardforks\");\nvar eips_1 = require(\"./eips\");\nvar CustomChain;\n(function (CustomChain) {\n  /**\n   * Polygon (Matic) Mainnet\n   *\n   * - [Documentation](https://docs.matic.network/docs/develop/network-details/network)\n   */\n  CustomChain[\"PolygonMainnet\"] = \"polygon-mainnet\";\n  /**\n   * Polygon (Matic) Mumbai Testnet\n   *\n   * - [Documentation](https://docs.matic.network/docs/develop/network-details/network)\n   */\n  CustomChain[\"PolygonMumbai\"] = \"polygon-mumbai\";\n  /**\n   * Arbitrum Rinkeby Testnet\n   *\n   * - [Documentation](https://developer.offchainlabs.com/docs/public_testnet)\n   */\n  CustomChain[\"ArbitrumRinkebyTestnet\"] = \"arbitrum-rinkeby-testnet\";\n  /**\n   * xDai EVM sidechain with a native stable token\n   *\n   * - [Documentation](https://www.xdaichain.com/)\n   */\n  CustomChain[\"xDaiChain\"] = \"x-dai-chain\";\n  /**\n   * Optimistic Kovan - testnet for Optimism roll-up\n   *\n   * - [Documentation](https://community.optimism.io/docs/developers/tutorials.html)\n   */\n  CustomChain[\"OptimisticKovan\"] = \"optimistic-kovan\";\n  /**\n   * Optimistic Ethereum - mainnet for Optimism roll-up\n   *\n   * - [Documentation](https://community.optimism.io/docs/developers/tutorials.html)\n   */\n  CustomChain[\"OptimisticEthereum\"] = \"optimistic-ethereum\";\n})(CustomChain = exports.CustomChain || (exports.CustomChain = {}));\nvar Chain;\n(function (Chain) {\n  Chain[Chain[\"Mainnet\"] = 1] = \"Mainnet\";\n  Chain[Chain[\"Ropsten\"] = 3] = \"Ropsten\";\n  Chain[Chain[\"Rinkeby\"] = 4] = \"Rinkeby\";\n  Chain[Chain[\"Kovan\"] = 42] = \"Kovan\";\n  Chain[Chain[\"Goerli\"] = 5] = \"Goerli\";\n  Chain[Chain[\"Sepolia\"] = 11155111] = \"Sepolia\";\n})(Chain = exports.Chain || (exports.Chain = {}));\nvar Hardfork;\n(function (Hardfork) {\n  Hardfork[\"Chainstart\"] = \"chainstart\";\n  Hardfork[\"Homestead\"] = \"homestead\";\n  Hardfork[\"Dao\"] = \"dao\";\n  Hardfork[\"TangerineWhistle\"] = \"tangerineWhistle\";\n  Hardfork[\"SpuriousDragon\"] = \"spuriousDragon\";\n  Hardfork[\"Byzantium\"] = \"byzantium\";\n  Hardfork[\"Constantinople\"] = \"constantinople\";\n  Hardfork[\"Petersburg\"] = \"petersburg\";\n  Hardfork[\"Istanbul\"] = \"istanbul\";\n  Hardfork[\"MuirGlacier\"] = \"muirGlacier\";\n  Hardfork[\"Berlin\"] = \"berlin\";\n  Hardfork[\"London\"] = \"london\";\n  Hardfork[\"ArrowGlacier\"] = \"arrowGlacier\";\n  Hardfork[\"Shanghai\"] = \"shanghai\";\n  Hardfork[\"Merge\"] = \"merge\";\n})(Hardfork = exports.Hardfork || (exports.Hardfork = {}));\nvar ConsensusType;\n(function (ConsensusType) {\n  ConsensusType[\"ProofOfStake\"] = \"pos\";\n  ConsensusType[\"ProofOfWork\"] = \"pow\";\n  ConsensusType[\"ProofOfAuthority\"] = \"poa\";\n})(ConsensusType = exports.ConsensusType || (exports.ConsensusType = {}));\nvar ConsensusAlgorithm;\n(function (ConsensusAlgorithm) {\n  ConsensusAlgorithm[\"Ethash\"] = \"ethash\";\n  ConsensusAlgorithm[\"Clique\"] = \"clique\";\n  ConsensusAlgorithm[\"Casper\"] = \"casper\";\n})(ConsensusAlgorithm = exports.ConsensusAlgorithm || (exports.ConsensusAlgorithm = {}));\n/**\n * Common class to access chain and hardfork parameters and to provide\n * a unified and shared view on the network and hardfork state.\n *\n * Use the {@link Common.custom} static constructor for creating simple\n * custom chain {@link Common} objects (more complete custom chain setups\n * can be created via the main constructor and the {@link CommonOpts.customChains} parameter).\n */\nvar Common = /** @class */function (_super) {\n  __extends(Common, _super);\n  /**\n   *\n   * @constructor\n   */\n  function Common(opts) {\n    var e_1, _a;\n    var _b, _c;\n    var _this = _super.call(this) || this;\n    _this._supportedHardforks = [];\n    _this._eips = [];\n    _this._customChains = (_b = opts.customChains) !== null && _b !== void 0 ? _b : [];\n    _this._chainParams = _this.setChain(opts.chain);\n    _this.DEFAULT_HARDFORK = (_c = _this._chainParams.defaultHardfork) !== null && _c !== void 0 ? _c : Hardfork.Istanbul;\n    try {\n      for (var _d = __values(_this._chainParams.hardforks), _e = _d.next(); !_e.done; _e = _d.next()) {\n        var hf = _e.value;\n        if (!hf.forkHash) {\n          hf.forkHash = _this._calcForkHash(hf.name);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    _this._hardfork = _this.DEFAULT_HARDFORK;\n    if (opts.supportedHardforks) {\n      _this._supportedHardforks = opts.supportedHardforks;\n    }\n    if (opts.hardfork) {\n      _this.setHardfork(opts.hardfork);\n    }\n    if (opts.eips) {\n      _this.setEIPs(opts.eips);\n    }\n    return _this;\n  }\n  /**\n   * Creates a {@link Common} object for a custom chain, based on a standard one.\n   *\n   * It uses all the {@link Chain} parameters from the {@link baseChain} option except the ones overridden\n   * in a provided {@link chainParamsOrName} dictionary. Some usage example:\n   *\n   * ```javascript\n   * Common.custom({chainId: 123})\n   * ```\n   *\n   * There are also selected supported custom chains which can be initialized by using one of the\n   * {@link CustomChains} for {@link chainParamsOrName}, e.g.:\n   *\n   * ```javascript\n   * Common.custom(CustomChains.MaticMumbai)\n   * ```\n   *\n   * Note that these supported custom chains only provide some base parameters (usually the chain and\n   * network ID and a name) and can only be used for selected use cases (e.g. sending a tx with\n   * the `@ethereumjs/tx` library to a Layer-2 chain).\n   *\n   * @param chainParamsOrName Custom parameter dict (`name` will default to `custom-chain`) or string with name of a supported custom chain\n   * @param opts Custom chain options to set the {@link CustomCommonOpts.baseChain}, selected {@link CustomCommonOpts.hardfork} and others\n   */\n  Common.custom = function (chainParamsOrName, opts) {\n    var _a;\n    if (opts === void 0) {\n      opts = {};\n    }\n    var baseChain = (_a = opts.baseChain) !== null && _a !== void 0 ? _a : 'mainnet';\n    var standardChainParams = __assign({}, Common._getChainParams(baseChain));\n    standardChainParams['name'] = 'custom-chain';\n    if (typeof chainParamsOrName !== 'string') {\n      return new Common(__assign({\n        chain: __assign(__assign({}, standardChainParams), chainParamsOrName)\n      }, opts));\n    } else {\n      if (chainParamsOrName === CustomChain.PolygonMainnet) {\n        return Common.custom({\n          name: CustomChain.PolygonMainnet,\n          chainId: 137,\n          networkId: 137\n        });\n      }\n      if (chainParamsOrName === CustomChain.PolygonMumbai) {\n        return Common.custom({\n          name: CustomChain.PolygonMumbai,\n          chainId: 80001,\n          networkId: 80001\n        });\n      }\n      if (chainParamsOrName === CustomChain.ArbitrumRinkebyTestnet) {\n        return Common.custom({\n          name: CustomChain.ArbitrumRinkebyTestnet,\n          chainId: 421611,\n          networkId: 421611\n        });\n      }\n      if (chainParamsOrName === CustomChain.xDaiChain) {\n        return Common.custom({\n          name: CustomChain.xDaiChain,\n          chainId: 100,\n          networkId: 100\n        });\n      }\n      if (chainParamsOrName === CustomChain.OptimisticKovan) {\n        return Common.custom({\n          name: CustomChain.OptimisticKovan,\n          chainId: 69,\n          networkId: 69\n        },\n        // Optimism has not implemented the London hardfork yet (targeting Q1.22)\n        {\n          hardfork: Hardfork.Berlin\n        });\n      }\n      if (chainParamsOrName === CustomChain.OptimisticEthereum) {\n        return Common.custom({\n          name: CustomChain.OptimisticEthereum,\n          chainId: 10,\n          networkId: 10\n        },\n        // Optimism has not implemented the London hardfork yet (targeting Q1.22)\n        {\n          hardfork: Hardfork.Berlin\n        });\n      }\n      throw new Error(\"Custom chain \".concat(chainParamsOrName, \" not supported\"));\n    }\n  };\n  /**\n   * Creates a {@link Common} object for a custom chain, based on a standard one. It uses all the `Chain`\n   * params from {@link baseChain} except the ones overridden in {@link customChainParams}.\n   *\n   * @deprecated Use {@link Common.custom} instead\n   *\n   * @param baseChain The name (`mainnet`) or id (`1`) of a standard chain used to base the custom\n   * chain params on.\n   * @param customChainParams The custom parameters of the chain.\n   * @param hardfork String identifier ('byzantium') for hardfork (optional)\n   * @param supportedHardforks Limit parameter returns to the given hardforks (optional)\n   */\n  Common.forCustomChain = function (baseChain, customChainParams, hardfork, supportedHardforks) {\n    var standardChainParams = Common._getChainParams(baseChain);\n    return new Common({\n      chain: __assign(__assign({}, standardChainParams), customChainParams),\n      hardfork: hardfork,\n      supportedHardforks: supportedHardforks\n    });\n  };\n  /**\n   * Static method to determine if a {@link chainId} is supported as a standard chain\n   * @param chainId BN id (`1`) of a standard chain\n   * @returns boolean\n   */\n  Common.isSupportedChainId = function (chainId) {\n    var initializedChains = (0, chains_1._getInitializedChains)();\n    return Boolean(initializedChains['names'][chainId.toString()]);\n  };\n  Common._getChainParams = function (chain, customChains) {\n    var initializedChains = (0, chains_1._getInitializedChains)(customChains);\n    if (typeof chain === 'number' || ethereumjs_util_1.BN.isBN(chain)) {\n      chain = chain.toString();\n      if (initializedChains['names'][chain]) {\n        var name_1 = initializedChains['names'][chain];\n        return initializedChains[name_1];\n      }\n      throw new Error(\"Chain with ID \".concat(chain, \" not supported\"));\n    }\n    if (initializedChains[chain]) {\n      return initializedChains[chain];\n    }\n    throw new Error(\"Chain with name \".concat(chain, \" not supported\"));\n  };\n  /**\n   * Sets the chain\n   * @param chain String ('mainnet') or Number (1) chain\n   *     representation. Or, a Dictionary of chain parameters for a private network.\n   * @returns The dictionary with parameters set as chain\n   */\n  Common.prototype.setChain = function (chain) {\n    var e_2, _a;\n    if (typeof chain === 'number' || typeof chain === 'string' || ethereumjs_util_1.BN.isBN(chain)) {\n      // Filter out genesis states if passed in to customChains\n      var plainCustomChains = void 0;\n      if (this._customChains && this._customChains.length > 0 && Array.isArray(this._customChains[0])) {\n        plainCustomChains = this._customChains.map(function (e) {\n          return e[0];\n        });\n      } else {\n        plainCustomChains = this._customChains;\n      }\n      this._chainParams = Common._getChainParams(chain, plainCustomChains);\n    } else if (typeof chain === 'object') {\n      if (this._customChains.length > 0) {\n        throw new Error('Chain must be a string, number, or BN when initialized with customChains passed in');\n      }\n      var required = ['networkId', 'genesis', 'hardforks', 'bootstrapNodes'];\n      try {\n        for (var required_1 = __values(required), required_1_1 = required_1.next(); !required_1_1.done; required_1_1 = required_1.next()) {\n          var param = required_1_1.value;\n          if (chain[param] === undefined) {\n            throw new Error(\"Missing required chain parameter: \".concat(param));\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (required_1_1 && !required_1_1.done && (_a = required_1.return)) _a.call(required_1);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n      this._chainParams = chain;\n    } else {\n      throw new Error('Wrong input format');\n    }\n    return this._chainParams;\n  };\n  /**\n   * Sets the hardfork to get params for\n   * @param hardfork String identifier (e.g. 'byzantium') or {@link Hardfork} enum\n   */\n  Common.prototype.setHardfork = function (hardfork) {\n    var e_3, _a;\n    if (!this._isSupportedHardfork(hardfork)) {\n      throw new Error(\"Hardfork \".concat(hardfork, \" not set as supported in supportedHardforks\"));\n    }\n    var existing = false;\n    try {\n      for (var HARDFORK_CHANGES_1 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_1_1 = HARDFORK_CHANGES_1.next(); !HARDFORK_CHANGES_1_1.done; HARDFORK_CHANGES_1_1 = HARDFORK_CHANGES_1.next()) {\n        var hfChanges = HARDFORK_CHANGES_1_1.value;\n        if (hfChanges[0] === hardfork) {\n          if (this._hardfork !== hardfork) {\n            this._hardfork = hardfork;\n            this.emit('hardforkChanged', hardfork);\n          }\n          existing = true;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_1_1 && !HARDFORK_CHANGES_1_1.done && (_a = HARDFORK_CHANGES_1.return)) _a.call(HARDFORK_CHANGES_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n    if (!existing) {\n      throw new Error(\"Hardfork with name \".concat(hardfork, \" not supported\"));\n    }\n  };\n  /**\n   * Returns the hardfork based on the block number or an optional\n   * total difficulty (Merge HF) provided.\n   *\n   * An optional TD takes precedence in case the corresponding HF block\n   * is set to `null` or otherwise needs to match (if not an error\n   * will be thrown).\n   *\n   * @param blockNumber\n   * @param td\n   * @returns The name of the HF\n   */\n  Common.prototype.getHardforkByBlockNumber = function (blockNumber, td) {\n    var e_4, _a;\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    td = (0, ethereumjs_util_1.toType)(td, ethereumjs_util_1.TypeOutput.BN);\n    var hardfork = Hardfork.Chainstart;\n    var minTdHF;\n    var maxTdHF;\n    var previousHF;\n    try {\n      for (var _b = __values(this.hardforks()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var hf = _c.value;\n        // Skip comparison for not applied HFs\n        if (hf.block === null) {\n          if (td !== undefined && td !== null && hf.td !== undefined && hf.td !== null) {\n            if (td.gte(new ethereumjs_util_1.BN(hf.td))) {\n              return hf.name;\n            }\n          }\n          continue;\n        }\n        if (blockNumber.gte(new ethereumjs_util_1.BN(hf.block))) {\n          hardfork = hf.name;\n        }\n        if (td && hf.td) {\n          if (td.gte(new ethereumjs_util_1.BN(hf.td))) {\n            minTdHF = hf.name;\n          } else {\n            maxTdHF = previousHF;\n          }\n        }\n        previousHF = hf.name;\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n    if (td) {\n      var msgAdd = \"block number: \".concat(blockNumber, \" (-> \").concat(hardfork, \"), \");\n      if (minTdHF) {\n        if (!this.hardforkGteHardfork(hardfork, minTdHF)) {\n          var msg = 'HF determined by block number is lower than the minimum total difficulty HF';\n          msgAdd += \"total difficulty: \".concat(td, \" (-> \").concat(minTdHF, \")\");\n          throw new Error(\"\".concat(msg, \": \").concat(msgAdd));\n        }\n      }\n      if (maxTdHF) {\n        if (!this.hardforkGteHardfork(maxTdHF, hardfork)) {\n          var msg = 'Maximum HF determined by total difficulty is lower than the block number HF';\n          msgAdd += \"total difficulty: \".concat(td, \" (-> \").concat(maxTdHF, \")\");\n          throw new Error(\"\".concat(msg, \": \").concat(msgAdd));\n        }\n      }\n    }\n    return hardfork;\n  };\n  /**\n   * Sets a new hardfork based on the block number or an optional\n   * total difficulty (Merge HF) provided.\n   *\n   * An optional TD takes precedence in case the corresponding HF block\n   * is set to `null` or otherwise needs to match (if not an error\n   * will be thrown).\n   *\n   * @param blockNumber\n   * @param td\n   * @returns The name of the HF set\n   */\n  Common.prototype.setHardforkByBlockNumber = function (blockNumber, td) {\n    var hardfork = this.getHardforkByBlockNumber(blockNumber, td);\n    this.setHardfork(hardfork);\n    return hardfork;\n  };\n  /**\n   * Internal helper function to choose between hardfork set and hardfork provided as param\n   * @param hardfork Hardfork given to function as a parameter\n   * @returns Hardfork chosen to be used\n   */\n  Common.prototype._chooseHardfork = function (hardfork, onlySupported) {\n    if (onlySupported === void 0) {\n      onlySupported = true;\n    }\n    if (!hardfork) {\n      hardfork = this._hardfork;\n    } else if (onlySupported && !this._isSupportedHardfork(hardfork)) {\n      throw new Error(\"Hardfork \".concat(hardfork, \" not set as supported in supportedHardforks\"));\n    }\n    return hardfork;\n  };\n  /**\n   * Internal helper function, returns the params for the given hardfork for the chain set\n   * @param hardfork Hardfork name\n   * @returns Dictionary with hardfork params\n   */\n  Common.prototype._getHardfork = function (hardfork) {\n    var e_5, _a;\n    var hfs = this.hardforks();\n    try {\n      for (var hfs_1 = __values(hfs), hfs_1_1 = hfs_1.next(); !hfs_1_1.done; hfs_1_1 = hfs_1.next()) {\n        var hf = hfs_1_1.value;\n        if (hf['name'] === hardfork) return hf;\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (hfs_1_1 && !hfs_1_1.done && (_a = hfs_1.return)) _a.call(hfs_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n    throw new Error(\"Hardfork \".concat(hardfork, \" not defined for chain \").concat(this.chainName()));\n  };\n  /**\n   * Internal helper function to check if a hardfork is set to be supported by the library\n   * @param hardfork Hardfork name\n   * @returns True if hardfork is supported\n   */\n  Common.prototype._isSupportedHardfork = function (hardfork) {\n    var e_6, _a;\n    if (this._supportedHardforks.length > 0) {\n      try {\n        for (var _b = __values(this._supportedHardforks), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var supportedHf = _c.value;\n          if (hardfork === supportedHf) return true;\n        }\n      } catch (e_6_1) {\n        e_6 = {\n          error: e_6_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_6) throw e_6.error;\n        }\n      }\n    } else {\n      return true;\n    }\n    return false;\n  };\n  /**\n   * Sets the active EIPs\n   * @param eips\n   */\n  Common.prototype.setEIPs = function (eips) {\n    var e_7, _a;\n    var _this = this;\n    if (eips === void 0) {\n      eips = [];\n    }\n    var _loop_1 = function (eip) {\n      if (!(eip in eips_1.EIPs)) {\n        throw new Error(\"\".concat(eip, \" not supported\"));\n      }\n      var minHF = this_1.gteHardfork(eips_1.EIPs[eip]['minimumHardfork']);\n      if (!minHF) {\n        throw new Error(\"\".concat(eip, \" cannot be activated on hardfork \").concat(this_1.hardfork(), \", minimumHardfork: \").concat(minHF));\n      }\n      if (eips_1.EIPs[eip].requiredEIPs) {\n        ;\n        eips_1.EIPs[eip].requiredEIPs.forEach(function (elem) {\n          if (!(eips.includes(elem) || _this.isActivatedEIP(elem))) {\n            throw new Error(\"\".concat(eip, \" requires EIP \").concat(elem, \", but is not included in the EIP list\"));\n          }\n        });\n      }\n    };\n    var this_1 = this;\n    try {\n      for (var eips_2 = __values(eips), eips_2_1 = eips_2.next(); !eips_2_1.done; eips_2_1 = eips_2.next()) {\n        var eip = eips_2_1.value;\n        _loop_1(eip);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (eips_2_1 && !eips_2_1.done && (_a = eips_2.return)) _a.call(eips_2);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n    this._eips = eips;\n  };\n  /**\n   * Returns a parameter for the current chain setup\n   *\n   * If the parameter is present in an EIP, the EIP always takes precendence.\n   * Otherwise the parameter if taken from the latest applied HF with\n   * a change on the respective parameter.\n   *\n   * @param topic Parameter topic ('gasConfig', 'gasPrices', 'vm', 'pow')\n   * @param name Parameter name (e.g. 'minGasLimit' for 'gasConfig' topic)\n   * @returns The value requested or `null` if not found\n   */\n  Common.prototype.param = function (topic, name) {\n    var e_8, _a;\n    // TODO: consider the case that different active EIPs\n    // can change the same parameter\n    var value = null;\n    try {\n      for (var _b = __values(this._eips), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var eip = _c.value;\n        value = this.paramByEIP(topic, name, eip);\n        if (value !== null) {\n          return value;\n        }\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n    return this.paramByHardfork(topic, name, this._hardfork);\n  };\n  /**\n   * Returns the parameter corresponding to a hardfork\n   * @param topic Parameter topic ('gasConfig', 'gasPrices', 'vm', 'pow')\n   * @param name Parameter name (e.g. 'minGasLimit' for 'gasConfig' topic)\n   * @param hardfork Hardfork name\n   * @returns The value requested or `null` if not found\n   */\n  Common.prototype.paramByHardfork = function (topic, name, hardfork) {\n    var e_9, _a, e_10, _b;\n    hardfork = this._chooseHardfork(hardfork);\n    var value = null;\n    try {\n      for (var HARDFORK_CHANGES_2 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_2_1 = HARDFORK_CHANGES_2.next(); !HARDFORK_CHANGES_2_1.done; HARDFORK_CHANGES_2_1 = HARDFORK_CHANGES_2.next()) {\n        var hfChanges = HARDFORK_CHANGES_2_1.value;\n        // EIP-referencing HF file (e.g. berlin.json)\n        if ('eips' in hfChanges[1]) {\n          var hfEIPs = hfChanges[1]['eips'];\n          try {\n            for (var hfEIPs_1 = (e_10 = void 0, __values(hfEIPs)), hfEIPs_1_1 = hfEIPs_1.next(); !hfEIPs_1_1.done; hfEIPs_1_1 = hfEIPs_1.next()) {\n              var eip = hfEIPs_1_1.value;\n              var valueEIP = this.paramByEIP(topic, name, eip);\n              value = valueEIP !== null ? valueEIP : value;\n            }\n          } catch (e_10_1) {\n            e_10 = {\n              error: e_10_1\n            };\n          } finally {\n            try {\n              if (hfEIPs_1_1 && !hfEIPs_1_1.done && (_b = hfEIPs_1.return)) _b.call(hfEIPs_1);\n            } finally {\n              if (e_10) throw e_10.error;\n            }\n          }\n          // Paramater-inlining HF file (e.g. istanbul.json)\n        } else {\n          if (!hfChanges[1][topic]) {\n            throw new Error(\"Topic \".concat(topic, \" not defined\"));\n          }\n          if (hfChanges[1][topic][name] !== undefined) {\n            value = hfChanges[1][topic][name].v;\n          }\n        }\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_2_1 && !HARDFORK_CHANGES_2_1.done && (_a = HARDFORK_CHANGES_2.return)) _a.call(HARDFORK_CHANGES_2);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n    return value;\n  };\n  /**\n   * Returns a parameter corresponding to an EIP\n   * @param topic Parameter topic ('gasConfig', 'gasPrices', 'vm', 'pow')\n   * @param name Parameter name (e.g. 'minGasLimit' for 'gasConfig' topic)\n   * @param eip Number of the EIP\n   * @returns The value requested or `null` if not found\n   */\n  Common.prototype.paramByEIP = function (topic, name, eip) {\n    if (!(eip in eips_1.EIPs)) {\n      throw new Error(\"\".concat(eip, \" not supported\"));\n    }\n    var eipParams = eips_1.EIPs[eip];\n    if (!(topic in eipParams)) {\n      throw new Error(\"Topic \".concat(topic, \" not defined\"));\n    }\n    if (eipParams[topic][name] === undefined) {\n      return null;\n    }\n    var value = eipParams[topic][name].v;\n    return value;\n  };\n  /**\n   * Returns a parameter for the hardfork active on block number\n   * @param topic Parameter topic\n   * @param name Parameter name\n   * @param blockNumber Block number\n   */\n  Common.prototype.paramByBlock = function (topic, name, blockNumber) {\n    var activeHfs = this.activeHardforks(blockNumber);\n    var hardfork = activeHfs[activeHfs.length - 1]['name'];\n    return this.paramByHardfork(topic, name, hardfork);\n  };\n  /**\n   * Checks if an EIP is activated by either being included in the EIPs\n   * manually passed in with the {@link CommonOpts.eips} or in a\n   * hardfork currently being active\n   *\n   * Note: this method only works for EIPs being supported\n   * by the {@link CommonOpts.eips} constructor option\n   * @param eip\n   */\n  Common.prototype.isActivatedEIP = function (eip) {\n    var e_11, _a;\n    if (this.eips().includes(eip)) {\n      return true;\n    }\n    try {\n      for (var HARDFORK_CHANGES_3 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_3_1 = HARDFORK_CHANGES_3.next(); !HARDFORK_CHANGES_3_1.done; HARDFORK_CHANGES_3_1 = HARDFORK_CHANGES_3.next()) {\n        var hfChanges = HARDFORK_CHANGES_3_1.value;\n        var hf = hfChanges[1];\n        if (this.gteHardfork(hf['name']) && 'eips' in hf) {\n          if (hf['eips'].includes(eip)) {\n            return true;\n          }\n        }\n      }\n    } catch (e_11_1) {\n      e_11 = {\n        error: e_11_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_3_1 && !HARDFORK_CHANGES_3_1.done && (_a = HARDFORK_CHANGES_3.return)) _a.call(HARDFORK_CHANGES_3);\n      } finally {\n        if (e_11) throw e_11.error;\n      }\n    }\n    return false;\n  };\n  /**\n   * Checks if set or provided hardfork is active on block number\n   * @param hardfork Hardfork name or null (for HF set)\n   * @param blockNumber\n   * @param opts Hardfork options (onlyActive unused)\n   * @returns True if HF is active on block number\n   */\n  Common.prototype.hardforkIsActiveOnBlock = function (hardfork, blockNumber, opts) {\n    var _a;\n    if (opts === void 0) {\n      opts = {};\n    }\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    var onlySupported = (_a = opts.onlySupported) !== null && _a !== void 0 ? _a : false;\n    hardfork = this._chooseHardfork(hardfork, onlySupported);\n    var hfBlock = this.hardforkBlockBN(hardfork);\n    if (hfBlock && blockNumber.gte(hfBlock)) {\n      return true;\n    }\n    return false;\n  };\n  /**\n   * Alias to hardforkIsActiveOnBlock when hardfork is set\n   * @param blockNumber\n   * @param opts Hardfork options (onlyActive unused)\n   * @returns True if HF is active on block number\n   */\n  Common.prototype.activeOnBlock = function (blockNumber, opts) {\n    return this.hardforkIsActiveOnBlock(null, blockNumber, opts);\n  };\n  /**\n   * Sequence based check if given or set HF1 is greater than or equal HF2\n   * @param hardfork1 Hardfork name or null (if set)\n   * @param hardfork2 Hardfork name\n   * @param opts Hardfork options\n   * @returns True if HF1 gte HF2\n   */\n  Common.prototype.hardforkGteHardfork = function (hardfork1, hardfork2, opts) {\n    var e_12, _a;\n    if (opts === void 0) {\n      opts = {};\n    }\n    var onlyActive = opts.onlyActive === undefined ? false : opts.onlyActive;\n    hardfork1 = this._chooseHardfork(hardfork1, opts.onlySupported);\n    var hardforks;\n    if (onlyActive) {\n      hardforks = this.activeHardforks(null, opts);\n    } else {\n      hardforks = this.hardforks();\n    }\n    var posHf1 = -1,\n      posHf2 = -1;\n    var index = 0;\n    try {\n      for (var hardforks_2 = __values(hardforks), hardforks_2_1 = hardforks_2.next(); !hardforks_2_1.done; hardforks_2_1 = hardforks_2.next()) {\n        var hf = hardforks_2_1.value;\n        if (hf['name'] === hardfork1) posHf1 = index;\n        if (hf['name'] === hardfork2) posHf2 = index;\n        index += 1;\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (hardforks_2_1 && !hardforks_2_1.done && (_a = hardforks_2.return)) _a.call(hardforks_2);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n    return posHf1 >= posHf2 && posHf2 !== -1;\n  };\n  /**\n   * Alias to hardforkGteHardfork when hardfork is set\n   * @param hardfork Hardfork name\n   * @param opts Hardfork options\n   * @returns True if hardfork set is greater than hardfork provided\n   */\n  Common.prototype.gteHardfork = function (hardfork, opts) {\n    return this.hardforkGteHardfork(null, hardfork, opts);\n  };\n  /**\n   * Checks if given or set hardfork is active on the chain\n   * @param hardfork Hardfork name, optional if HF set\n   * @param opts Hardfork options (onlyActive unused)\n   * @returns True if hardfork is active on the chain\n   */\n  Common.prototype.hardforkIsActiveOnChain = function (hardfork, opts) {\n    var e_13, _a;\n    var _b;\n    if (opts === void 0) {\n      opts = {};\n    }\n    var onlySupported = (_b = opts.onlySupported) !== null && _b !== void 0 ? _b : false;\n    hardfork = this._chooseHardfork(hardfork, onlySupported);\n    try {\n      for (var _c = __values(this.hardforks()), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var hf = _d.value;\n        if (hf['name'] === hardfork && hf['block'] !== null) return true;\n      }\n    } catch (e_13_1) {\n      e_13 = {\n        error: e_13_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_13) throw e_13.error;\n      }\n    }\n    return false;\n  };\n  /**\n   * Returns the active hardfork switches for the current chain\n   * @param blockNumber up to block if provided, otherwise for the whole chain\n   * @param opts Hardfork options (onlyActive unused)\n   * @return Array with hardfork arrays\n   */\n  Common.prototype.activeHardforks = function (blockNumber, opts) {\n    var e_14, _a;\n    if (opts === void 0) {\n      opts = {};\n    }\n    var activeHardforks = [];\n    var hfs = this.hardforks();\n    try {\n      for (var hfs_2 = __values(hfs), hfs_2_1 = hfs_2.next(); !hfs_2_1.done; hfs_2_1 = hfs_2.next()) {\n        var hf = hfs_2_1.value;\n        if (hf['block'] === null) continue;\n        if (blockNumber !== undefined && blockNumber !== null && blockNumber < hf['block']) break;\n        if (opts.onlySupported && !this._isSupportedHardfork(hf['name'])) continue;\n        activeHardforks.push(hf);\n      }\n    } catch (e_14_1) {\n      e_14 = {\n        error: e_14_1\n      };\n    } finally {\n      try {\n        if (hfs_2_1 && !hfs_2_1.done && (_a = hfs_2.return)) _a.call(hfs_2);\n      } finally {\n        if (e_14) throw e_14.error;\n      }\n    }\n    return activeHardforks;\n  };\n  /**\n   * Returns the latest active hardfork name for chain or block or throws if unavailable\n   * @param blockNumber up to block if provided, otherwise for the whole chain\n   * @param opts Hardfork options (onlyActive unused)\n   * @return Hardfork name\n   */\n  Common.prototype.activeHardfork = function (blockNumber, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    var activeHardforks = this.activeHardforks(blockNumber, opts);\n    if (activeHardforks.length > 0) {\n      return activeHardforks[activeHardforks.length - 1]['name'];\n    } else {\n      throw new Error(\"No (supported) active hardfork found\");\n    }\n  };\n  /**\n   * Returns the hardfork change block for hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if unscheduled\n   * @deprecated Please use {@link Common.hardforkBlockBN} for large number support\n   */\n  Common.prototype.hardforkBlock = function (hardfork) {\n    var block = this.hardforkBlockBN(hardfork);\n    return (0, ethereumjs_util_1.toType)(block, ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the hardfork change block for hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if unscheduled\n   */\n  Common.prototype.hardforkBlockBN = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n    var block = this._getHardfork(hardfork)['block'];\n    if (block === undefined || block === null) {\n      return null;\n    }\n    return new ethereumjs_util_1.BN(block);\n  };\n  /**\n   * Returns the hardfork change total difficulty (Merge HF) for hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Total difficulty or null if no set\n   */\n  Common.prototype.hardforkTD = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n    var td = this._getHardfork(hardfork)['td'];\n    if (td === undefined || td === null) {\n      return null;\n    }\n    return new ethereumjs_util_1.BN(td);\n  };\n  /**\n   * True if block number provided is the hardfork (given or set) change block\n   * @param blockNumber Number of the block to check\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns True if blockNumber is HF block\n   */\n  Common.prototype.isHardforkBlock = function (blockNumber, hardfork) {\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    hardfork = this._chooseHardfork(hardfork, false);\n    var block = this.hardforkBlockBN(hardfork);\n    return block ? block.eq(blockNumber) : false;\n  };\n  /**\n   * Returns the change block for the next hardfork after the hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if not available\n   * @deprecated Please use {@link Common.nextHardforkBlockBN} for large number support\n   */\n  Common.prototype.nextHardforkBlock = function (hardfork) {\n    var block = this.nextHardforkBlockBN(hardfork);\n    return (0, ethereumjs_util_1.toType)(block, ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the change block for the next hardfork after the hardfork provided or set\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns Block number or null if not available\n   */\n  Common.prototype.nextHardforkBlockBN = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n    var hfBlock = this.hardforkBlockBN(hardfork);\n    if (hfBlock === null) {\n      return null;\n    }\n    // Next fork block number or null if none available\n    // Logic: if accumulator is still null and on the first occurrence of\n    // a block greater than the current hfBlock set the accumulator,\n    // pass on the accumulator as the final result from this time on\n    var nextHfBlock = this.hardforks().reduce(function (acc, hf) {\n      var block = new ethereumjs_util_1.BN(hf.block);\n      return block.gt(hfBlock) && acc === null ? block : acc;\n    }, null);\n    return nextHfBlock;\n  };\n  /**\n   * True if block number provided is the hardfork change block following the hardfork given or set\n   * @param blockNumber Number of the block to check\n   * @param hardfork Hardfork name, optional if HF set\n   * @returns True if blockNumber is HF block\n   */\n  Common.prototype.isNextHardforkBlock = function (blockNumber, hardfork) {\n    blockNumber = (0, ethereumjs_util_1.toType)(blockNumber, ethereumjs_util_1.TypeOutput.BN);\n    hardfork = this._chooseHardfork(hardfork, false);\n    var nextHardforkBlock = this.nextHardforkBlockBN(hardfork);\n    return nextHardforkBlock === null ? false : nextHardforkBlock.eq(blockNumber);\n  };\n  /**\n   * Internal helper function to calculate a fork hash\n   * @param hardfork Hardfork name\n   * @returns Fork hash as hex string\n   */\n  Common.prototype._calcForkHash = function (hardfork) {\n    var e_15, _a;\n    var genesis = Buffer.from(this.genesis().hash.substr(2), 'hex');\n    var hfBuffer = Buffer.alloc(0);\n    var prevBlock = 0;\n    try {\n      for (var _b = __values(this.hardforks()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var hf = _c.value;\n        var block = hf.block;\n        // Skip for chainstart (0), not applied HFs (null) and\n        // when already applied on same block number HFs\n        if (block !== 0 && block !== null && block !== prevBlock) {\n          var hfBlockBuffer = Buffer.from(block.toString(16).padStart(16, '0'), 'hex');\n          hfBuffer = Buffer.concat([hfBuffer, hfBlockBuffer]);\n        }\n        if (hf.name === hardfork) break;\n        if (block !== null) {\n          prevBlock = block;\n        }\n      }\n    } catch (e_15_1) {\n      e_15 = {\n        error: e_15_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_15) throw e_15.error;\n      }\n    }\n    var inputBuffer = Buffer.concat([genesis, hfBuffer]);\n    // CRC32 delivers result as signed (negative) 32-bit integer,\n    // convert to hex string\n    var forkhash = (0, ethereumjs_util_1.intToBuffer)((0, crc_32_1.buf)(inputBuffer) >>> 0).toString('hex');\n    return \"0x\".concat(forkhash);\n  };\n  /**\n   * Returns an eth/64 compliant fork hash (EIP-2124)\n   * @param hardfork Hardfork name, optional if HF set\n   */\n  Common.prototype.forkHash = function (hardfork) {\n    hardfork = this._chooseHardfork(hardfork, false);\n    var data = this._getHardfork(hardfork);\n    if (data['block'] === null && data['td'] === undefined) {\n      var msg = 'No fork hash calculation possible for future hardfork';\n      throw new Error(msg);\n    }\n    if (data['forkHash'] !== undefined) {\n      return data['forkHash'];\n    }\n    return this._calcForkHash(hardfork);\n  };\n  /**\n   *\n   * @param forkHash Fork hash as a hex string\n   * @returns Array with hardfork data (name, block, forkHash)\n   */\n  Common.prototype.hardforkForForkHash = function (forkHash) {\n    var resArray = this.hardforks().filter(function (hf) {\n      return hf.forkHash === forkHash;\n    });\n    return resArray.length >= 1 ? resArray[resArray.length - 1] : null;\n  };\n  /**\n   * Returns the Genesis parameters of the current chain\n   * @returns Genesis dictionary\n   */\n  Common.prototype.genesis = function () {\n    return this._chainParams['genesis'];\n  };\n  /**\n   * Returns the Genesis state of the current chain,\n   * all values are provided as hex-prefixed strings.\n   */\n  Common.prototype.genesisState = function () {\n    var e_16, _a;\n    // Use require statements here in favor of import statements\n    // to load json files on demand\n    // (high memory usage by large mainnet.json genesis state file)\n    switch (this.chainName()) {\n      case 'mainnet':\n        return require('./genesisStates/mainnet.json');\n      case 'ropsten':\n        return require('./genesisStates/ropsten.json');\n      case 'rinkeby':\n        return require('./genesisStates/rinkeby.json');\n      case 'kovan':\n        return require('./genesisStates/kovan.json');\n      case 'goerli':\n        return require('./genesisStates/goerli.json');\n      case 'sepolia':\n        return require('./genesisStates/sepolia.json');\n    }\n    // Custom chains with genesis state provided\n    if (this._customChains && this._customChains.length > 0 && Array.isArray(this._customChains[0])) {\n      try {\n        for (var _b = __values(this._customChains), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var chainArrayWithGenesis = _c.value;\n          if (chainArrayWithGenesis[0].name === this.chainName()) {\n            return chainArrayWithGenesis[1];\n          }\n        }\n      } catch (e_16_1) {\n        e_16 = {\n          error: e_16_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_16) throw e_16.error;\n        }\n      }\n    }\n    return {};\n  };\n  /**\n   * Returns the hardforks for current chain\n   * @returns {Array} Array with arrays of hardforks\n   */\n  Common.prototype.hardforks = function () {\n    return this._chainParams['hardforks'];\n  };\n  /**\n   * Returns bootstrap nodes for the current chain\n   * @returns {Dictionary} Dict with bootstrap nodes\n   */\n  Common.prototype.bootstrapNodes = function () {\n    return this._chainParams['bootstrapNodes'];\n  };\n  /**\n   * Returns DNS networks for the current chain\n   * @returns {String[]} Array of DNS ENR urls\n   */\n  Common.prototype.dnsNetworks = function () {\n    return this._chainParams['dnsNetworks'];\n  };\n  /**\n   * Returns the hardfork set\n   * @returns Hardfork name\n   */\n  Common.prototype.hardfork = function () {\n    return this._hardfork;\n  };\n  /**\n   * Returns the Id of current chain\n   * @returns chain Id\n   * @deprecated Please use {@link Common.chainIdBN} for large number support\n   */\n  Common.prototype.chainId = function () {\n    return (0, ethereumjs_util_1.toType)(this.chainIdBN(), ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the Id of current chain\n   * @returns chain Id\n   */\n  Common.prototype.chainIdBN = function () {\n    return new ethereumjs_util_1.BN(this._chainParams['chainId']);\n  };\n  /**\n   * Returns the name of current chain\n   * @returns chain name (lower case)\n   */\n  Common.prototype.chainName = function () {\n    return this._chainParams['name'];\n  };\n  /**\n   * Returns the Id of current network\n   * @returns network Id\n   * @deprecated Please use {@link Common.networkIdBN} for large number support\n   */\n  Common.prototype.networkId = function () {\n    return (0, ethereumjs_util_1.toType)(this.networkIdBN(), ethereumjs_util_1.TypeOutput.Number);\n  };\n  /**\n   * Returns the Id of current network\n   * @returns network Id\n   */\n  Common.prototype.networkIdBN = function () {\n    return new ethereumjs_util_1.BN(this._chainParams['networkId']);\n  };\n  /**\n   * Returns the active EIPs\n   * @returns List of EIPs\n   */\n  Common.prototype.eips = function () {\n    return this._eips;\n  };\n  /**\n   * Returns the consensus type of the network\n   * Possible values: \"pow\"|\"poa\"|\"pos\"\n   *\n   * Note: This value can update along a hardfork.\n   */\n  Common.prototype.consensusType = function () {\n    var e_17, _a;\n    var hardfork = this.hardfork();\n    var value;\n    try {\n      for (var HARDFORK_CHANGES_4 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_4_1 = HARDFORK_CHANGES_4.next(); !HARDFORK_CHANGES_4_1.done; HARDFORK_CHANGES_4_1 = HARDFORK_CHANGES_4.next()) {\n        var hfChanges = HARDFORK_CHANGES_4_1.value;\n        if ('consensus' in hfChanges[1]) {\n          value = hfChanges[1]['consensus']['type'];\n        }\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_17_1) {\n      e_17 = {\n        error: e_17_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_4_1 && !HARDFORK_CHANGES_4_1.done && (_a = HARDFORK_CHANGES_4.return)) _a.call(HARDFORK_CHANGES_4);\n      } finally {\n        if (e_17) throw e_17.error;\n      }\n    }\n    if (value) {\n      return value;\n    }\n    return this._chainParams['consensus']['type'];\n  };\n  /**\n   * Returns the concrete consensus implementation\n   * algorithm or protocol for the network\n   * e.g. \"ethash\" for \"pow\" consensus type,\n   * \"clique\" for \"poa\" consensus type or\n   * \"casper\" for \"pos\" consensus type.\n   *\n   * Note: This value can update along a hardfork.\n   */\n  Common.prototype.consensusAlgorithm = function () {\n    var e_18, _a;\n    var hardfork = this.hardfork();\n    var value;\n    try {\n      for (var HARDFORK_CHANGES_5 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_5_1 = HARDFORK_CHANGES_5.next(); !HARDFORK_CHANGES_5_1.done; HARDFORK_CHANGES_5_1 = HARDFORK_CHANGES_5.next()) {\n        var hfChanges = HARDFORK_CHANGES_5_1.value;\n        if ('consensus' in hfChanges[1]) {\n          value = hfChanges[1]['consensus']['algorithm'];\n        }\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_18_1) {\n      e_18 = {\n        error: e_18_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_5_1 && !HARDFORK_CHANGES_5_1.done && (_a = HARDFORK_CHANGES_5.return)) _a.call(HARDFORK_CHANGES_5);\n      } finally {\n        if (e_18) throw e_18.error;\n      }\n    }\n    if (value) {\n      return value;\n    }\n    return this._chainParams['consensus']['algorithm'];\n  };\n  /**\n   * Returns a dictionary with consensus configuration\n   * parameters based on the consensus algorithm\n   *\n   * Expected returns (parameters must be present in\n   * the respective chain json files):\n   *\n   * ethash: -\n   * clique: period, epoch\n   * aura: -\n   * casper: -\n   *\n   * Note: This value can update along a hardfork.\n   */\n  Common.prototype.consensusConfig = function () {\n    var e_19, _a;\n    var hardfork = this.hardfork();\n    var value;\n    try {\n      for (var HARDFORK_CHANGES_6 = __values(hardforks_1.hardforks), HARDFORK_CHANGES_6_1 = HARDFORK_CHANGES_6.next(); !HARDFORK_CHANGES_6_1.done; HARDFORK_CHANGES_6_1 = HARDFORK_CHANGES_6.next()) {\n        var hfChanges = HARDFORK_CHANGES_6_1.value;\n        if ('consensus' in hfChanges[1]) {\n          // The config parameter is named after the respective consensus algorithm\n          value = hfChanges[1]['consensus'][hfChanges[1]['consensus']['algorithm']];\n        }\n        if (hfChanges[0] === hardfork) break;\n      }\n    } catch (e_19_1) {\n      e_19 = {\n        error: e_19_1\n      };\n    } finally {\n      try {\n        if (HARDFORK_CHANGES_6_1 && !HARDFORK_CHANGES_6_1.done && (_a = HARDFORK_CHANGES_6.return)) _a.call(HARDFORK_CHANGES_6);\n      } finally {\n        if (e_19) throw e_19.error;\n      }\n    }\n    if (value) {\n      return value;\n    }\n    var consensusAlgorithm = this.consensusAlgorithm();\n    return this._chainParams['consensus'][consensusAlgorithm];\n  };\n  /**\n   * Returns a deep copy of this {@link Common} instance.\n   */\n  Common.prototype.copy = function () {\n    return Object.assign(Object.create(Object.getPrototypeOf(this)), this);\n  };\n  return Common;\n}(events_1.EventEmitter);\nexports.default = Common;","map":{"version":3,"mappings":"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","names":["CustomChain","exports","Chain","Hardfork","ConsensusType","ConsensusAlgorithm","__extends","opts","_super","_this","_customChains","customChains","_chainParams","setChain","chain","DEFAULT_HARDFORK","defaultHardfork","Istanbul","hardforks","hf","forkHash","_calcForkHash","name","_hardfork","supportedHardforks","_supportedHardforks","hardfork","setHardfork","eips","setEIPs","Common","chainParamsOrName","baseChain","standardChainParams","_getChainParams","PolygonMainnet","custom","chainId","networkId","PolygonMumbai","ArbitrumRinkebyTestnet","xDaiChain","OptimisticKovan","Berlin","OptimisticEthereum","Error","customChainParams","initializedChains","Boolean","toString","ethereumjs_util_1","isBN","name_1","plainCustomChains","length","Array","isArray","map","e","required","param","undefined","_isSupportedHardfork","existing","hfChanges","emit","blockNumber","td","BN","Chainstart","minTdHF","maxTdHF","previousHF","block","gte","msgAdd","hardforkGteHardfork","msg","getHardforkByBlockNumber","onlySupported","hfs","chainName","supportedHf","eip","eips_1","minHF","this_1","gteHardfork","requiredEIPs","forEach","elem","includes","isActivatedEIP","_eips","topic","value","paramByEIP","paramByHardfork","_chooseHardfork","hfEIPs","valueEIP","v","eipParams","activeHfs","activeHardforks","hfBlock","hardforkBlockBN","hardforkIsActiveOnBlock","hardfork1","hardfork2","onlyActive","posHf1","posHf2","index","push","Number","_getHardfork","eq","nextHardforkBlockBN","nextHfBlock","reduce","acc","gt","nextHardforkBlock","genesis","Buffer","from","hash","substr","hfBuffer","alloc","prevBlock","hfBlockBuffer","padStart","concat","inputBuffer","forkhash","data","resArray","filter","require","chainArrayWithGenesis","chainIdBN","networkIdBN","consensusAlgorithm","Object","assign","create","getPrototypeOf","events_1"],"sourceRoot":"","sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}