{"ast":null,"code":";\n(function (global) {\n  'use strict';\n\n  var nextTick = function (fn) {\n    setTimeout(fn, 0);\n  };\n  if (typeof process != 'undefined' && process && typeof process.nextTick == 'function') {\n    // node.js and the like\n    nextTick = process.nextTick;\n  }\n  function semaphore(capacity) {\n    var semaphore = {\n      capacity: capacity || 1,\n      current: 0,\n      queue: [],\n      firstHere: false,\n      take: function () {\n        if (semaphore.firstHere === false) {\n          semaphore.current++;\n          semaphore.firstHere = true;\n          var isFirst = 1;\n        } else {\n          var isFirst = 0;\n        }\n        var item = {\n          n: 1\n        };\n        if (typeof arguments[0] == 'function') {\n          item.task = arguments[0];\n        } else {\n          item.n = arguments[0];\n        }\n        if (arguments.length >= 2) {\n          if (typeof arguments[1] == 'function') item.task = arguments[1];else item.n = arguments[1];\n        }\n        var task = item.task;\n        item.task = function () {\n          task(semaphore.leave);\n        };\n        if (semaphore.current + item.n - isFirst > semaphore.capacity) {\n          if (isFirst === 1) {\n            semaphore.current--;\n            semaphore.firstHere = false;\n          }\n          return semaphore.queue.push(item);\n        }\n        semaphore.current += item.n - isFirst;\n        item.task(semaphore.leave);\n        if (isFirst === 1) semaphore.firstHere = false;\n      },\n      leave: function (n) {\n        n = n || 1;\n        semaphore.current -= n;\n        if (!semaphore.queue.length) {\n          if (semaphore.current < 0) {\n            throw new Error('leave called too many times.');\n          }\n          return;\n        }\n        var item = semaphore.queue[0];\n        if (item.n + semaphore.current > semaphore.capacity) {\n          return;\n        }\n        semaphore.queue.shift();\n        semaphore.current += item.n;\n        nextTick(item.task);\n      },\n      available: function (n) {\n        n = n || 1;\n        return semaphore.current + n <= semaphore.capacity;\n      }\n    };\n    return semaphore;\n  }\n  ;\n  if (typeof exports === 'object') {\n    // node export\n    module.exports = semaphore;\n  } else if (typeof define === 'function' && define.amd) {\n    // amd export\n    define(function () {\n      return semaphore;\n    });\n  } else {\n    // browser global\n    global.semaphore = semaphore;\n  }\n})(this);","map":{"version":3,"names":["global","nextTick","fn","setTimeout","process","semaphore","capacity","current","queue","firstHere","take","isFirst","item","n","arguments","task","length","leave","push","Error","shift","available","exports","module","define","amd"],"sources":["/Users/shivamsoni/Desktop/router/pingspong/Ping-Pong/node_modules/semaphore/lib/semaphore.js"],"sourcesContent":[";(function(global) {\n\n'use strict';\n\nvar nextTick = function (fn) { setTimeout(fn, 0); }\nif (typeof process != 'undefined' && process && typeof process.nextTick == 'function') {\n\t// node.js and the like\n\tnextTick = process.nextTick;\n}\n\nfunction semaphore(capacity) {\n\tvar semaphore = {\n\t\tcapacity: capacity || 1,\n\t\tcurrent: 0,\n\t\tqueue: [],\n\t\tfirstHere: false,\n\n\t\ttake: function() {\n\t\t\tif (semaphore.firstHere === false) {\n        \t\t\tsemaphore.current++;\n        \t\t\tsemaphore.firstHere = true;\n        \t\t\tvar isFirst = 1;\n      \t\t\t} else {\n        \t\t\tvar isFirst = 0;\n      \t\t\t}\n\t\t\tvar item = { n: 1 };\n\n\t\t\tif (typeof arguments[0] == 'function') {\n\t\t\t\titem.task = arguments[0];\n\t\t\t} else {\n\t\t\t\titem.n = arguments[0];\n\t\t\t}\n\n\t\t\tif (arguments.length >= 2)  {\n\t\t\t\tif (typeof arguments[1] == 'function') item.task = arguments[1];\n\t\t\t\telse item.n = arguments[1];\n\t\t\t}\n\n\t\t\tvar task = item.task;\n\t\t\titem.task = function() { task(semaphore.leave); };\n\n\t\t\tif (semaphore.current + item.n - isFirst > semaphore.capacity) {\n        \t\t\tif (isFirst === 1) {\n        \t\t\t\tsemaphore.current--;\n        \t\t\t\tsemaphore.firstHere = false;\n        \t\t\t}\n\t\t\t\treturn semaphore.queue.push(item);\n\t\t\t}\n\n\t\t\tsemaphore.current += item.n - isFirst;\n\t\t\titem.task(semaphore.leave);\n      \t\t\tif (isFirst === 1) semaphore.firstHere = false;\n\t\t},\n\n\t\tleave: function(n) {\n\t\t\tn = n || 1;\n\n\t\t\tsemaphore.current -= n;\n\n\t\t\tif (!semaphore.queue.length) {\n\t\t\t\tif (semaphore.current < 0) {\n\t\t\t\t\tthrow new Error('leave called too many times.');\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar item = semaphore.queue[0];\n\n\t\t\tif (item.n + semaphore.current > semaphore.capacity) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsemaphore.queue.shift();\n\t\t\tsemaphore.current += item.n;\n\n\t\t\tnextTick(item.task);\n\t\t},\n\n\t\tavailable: function(n) {\n\t\t\tn = n || 1;\n\t\t\treturn(semaphore.current + n <= semaphore.capacity);\n\t\t}\n\t};\n\n\treturn semaphore;\n};\n\nif (typeof exports === 'object') {\n    // node export\n    module.exports = semaphore;\n} else if (typeof define === 'function' && define.amd) {\n    // amd export\n    define(function () {\n        return semaphore;\n    });\n} else {\n    // browser global\n    global.semaphore = semaphore;\n}\n}(this));\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}