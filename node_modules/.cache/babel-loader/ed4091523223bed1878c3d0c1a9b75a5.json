{"ast":null,"code":"\"use strict\";\n\nvar _Object$keys = require(\"@babel/runtime-corejs3/core-js-stable/object/keys\");\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\");\nvar _filterInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\");\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\nvar _forEachInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\");\nvar _Object$getOwnPropertyDescriptors = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\");\nvar _Object$defineProperties = require(\"@babel/runtime-corejs3/core-js-stable/object/define-properties\");\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _setTimeout2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"));\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\nvar _promiseUtils = require(\"./promiseUtils\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = _Object$keys(object);\n  if (_Object$getOwnPropertySymbols) {\n    var symbols = _Object$getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) {\n      return _Object$getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var _context5, _context6;\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? _forEachInstanceProperty(_context5 = ownKeys(Object(source), !0)).call(_context5, function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : _forEachInstanceProperty(_context6 = ownKeys(Object(source))).call(_context6, function (key) {\n      _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n/* global XMLHttpRequest, XDomainRequest */\n\nvar _require = require('uuid'),\n  uuidv4 = _require.v4;\nvar XHR = null;\nif (typeof XMLHttpRequest !== 'undefined') {\n  XHR = XMLHttpRequest;\n}\nvar useXDomainRequest = false;\nif (typeof XDomainRequest !== 'undefined' && !('withCredentials' in new XMLHttpRequest())) {\n  useXDomainRequest = true;\n}\nfunction ajaxIE9(method\n/*: string*/, url\n/*: string*/, data\n/*: any*/, headers\n/*:: ?: any*/, options\n/*:: ?: FullOptions*/) {\n  return new _promise.default(function (resolve, reject) {\n    var xdr = new XDomainRequest();\n    xdr.onload = function () {\n      var response;\n      try {\n        response = JSON.parse(xdr.responseText);\n      } catch (e) {\n        reject(e);\n      }\n      if (response) {\n        resolve({\n          response: response\n        });\n      }\n    };\n    xdr.onerror = xdr.ontimeout = function () {\n      // Let's fake a real error message.\n      var fakeResponse = {\n        responseText: (0, _stringify.default)({\n          code: _ParseError.default.X_DOMAIN_REQUEST,\n          error: \"IE's XDomainRequest does not supply error info.\"\n        })\n      };\n      reject(fakeResponse);\n    };\n    xdr.onprogress = function () {\n      if (options && typeof options.progress === 'function') {\n        options.progress(xdr.responseText);\n      }\n    };\n    xdr.open(method, url);\n    xdr.send(data);\n    if (options && typeof options.requestTask === 'function') {\n      options.requestTask(xdr);\n    }\n  });\n}\nvar RESTController = {\n  ajax: function (method\n  /*: string*/, url\n  /*: string*/, data\n  /*: any*/, headers\n  /*:: ?: any*/, options\n  /*:: ?: FullOptions*/) {\n    var _context;\n    if (useXDomainRequest) {\n      return ajaxIE9(method, url, data, headers, options);\n    }\n    var promise = (0, _promiseUtils.resolvingPromise)();\n    var isIdempotent = _CoreManager.default.get('IDEMPOTENCY') && (0, _includes.default)(_context = ['POST', 'PUT']).call(_context, method);\n    var requestId = isIdempotent ? uuidv4() : '';\n    var attempts = 0;\n    var dispatch = function dispatch() {\n      if (XHR == null) {\n        throw new Error('Cannot make a request: No definition of XMLHttpRequest was found.');\n      }\n      var handled = false;\n      var xhr = new XHR();\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState !== 4 || handled || xhr._aborted) {\n          return;\n        }\n        handled = true;\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n          try {\n            response = JSON.parse(xhr.responseText);\n            if (typeof xhr.getResponseHeader === 'function') {\n              var _context2;\n              if ((0, _includes.default)(_context2 = xhr.getAllResponseHeaders() || '').call(_context2, 'x-parse-job-status-id: ')) {\n                response = xhr.getResponseHeader('x-parse-job-status-id');\n              }\n            }\n          } catch (e) {\n            promise.reject(e.toString());\n          }\n          if (response) {\n            promise.resolve({\n              response: response,\n              status: xhr.status,\n              xhr: xhr\n            });\n          }\n        } else if (xhr.status >= 500 || xhr.status === 0) {\n          // retry on 5XX or node-xmlhttprequest error\n          if (++attempts < _CoreManager.default.get('REQUEST_ATTEMPT_LIMIT')) {\n            // Exponentially-growing random delay\n            var delay = Math.round(Math.random() * 125 * Math.pow(2, attempts));\n            (0, _setTimeout2.default)(dispatch, delay);\n          } else if (xhr.status === 0) {\n            promise.reject('Unable to connect to the Parse API');\n          } else {\n            // After the retry limit is reached, fail\n            promise.reject(xhr);\n          }\n        } else {\n          promise.reject(xhr);\n        }\n      };\n      headers = headers || {};\n      if (typeof headers['Content-Type'] !== 'string') {\n        // Avoid pre-flight\n        headers['Content-Type'] = 'text/plain';\n      }\n      if (_CoreManager.default.get('IS_NODE')) {\n        var _context3;\n        headers['User-Agent'] = (0, _concat.default)(_context3 = \"Parse/\".concat(_CoreManager.default.get('VERSION'), \" (NodeJS \")).call(_context3, process.versions.node, \")\");\n      }\n      if (isIdempotent) {\n        headers['X-Parse-Request-Id'] = requestId;\n      }\n      if (_CoreManager.default.get('SERVER_AUTH_TYPE') && _CoreManager.default.get('SERVER_AUTH_TOKEN')) {\n        var _context4;\n        headers.Authorization = (0, _concat.default)(_context4 = \"\".concat(_CoreManager.default.get('SERVER_AUTH_TYPE'), \" \")).call(_context4, _CoreManager.default.get('SERVER_AUTH_TOKEN'));\n      }\n      var customHeaders = _CoreManager.default.get('REQUEST_HEADERS');\n      for (var key in customHeaders) {\n        headers[key] = customHeaders[key];\n      }\n      function handleProgress(type, event) {\n        if (options && typeof options.progress === 'function') {\n          if (event.lengthComputable) {\n            options.progress(event.loaded / event.total, event.loaded, event.total, {\n              type: type\n            });\n          } else {\n            options.progress(null, null, null, {\n              type: type\n            });\n          }\n        }\n      }\n      xhr.onprogress = function (event) {\n        handleProgress('download', event);\n      };\n      if (xhr.upload) {\n        xhr.upload.onprogress = function (event) {\n          handleProgress('upload', event);\n        };\n      }\n      xhr.open(method, url, true);\n      for (var h in headers) {\n        xhr.setRequestHeader(h, headers[h]);\n      }\n      xhr.onabort = function () {\n        promise.resolve({\n          response: {\n            results: []\n          },\n          status: 0,\n          xhr: xhr\n        });\n      };\n      xhr.send(data);\n      if (options && typeof options.requestTask === 'function') {\n        options.requestTask(xhr);\n      }\n    };\n    dispatch();\n    return promise;\n  },\n  request: function (method\n  /*: string*/, path\n  /*: string*/, data\n  /*: mixed*/, options\n  /*:: ?: RequestOptions*/) {\n    options = options || {};\n    var url = _CoreManager.default.get('SERVER_URL');\n    if (url[url.length - 1] !== '/') {\n      url += '/';\n    }\n    url += path;\n    var payload = {};\n    if (data && (0, _typeof2.default)(data) === 'object') {\n      for (var k in data) {\n        payload[k] = data[k];\n      }\n    } // Add context\n\n    var _options = options,\n      context = _options.context;\n    if (context !== undefined) {\n      payload._context = context;\n    }\n    if (method !== 'POST') {\n      payload._method = method;\n      method = 'POST';\n    }\n    payload._ApplicationId = _CoreManager.default.get('APPLICATION_ID');\n    var jsKey = _CoreManager.default.get('JAVASCRIPT_KEY');\n    if (jsKey) {\n      payload._JavaScriptKey = jsKey;\n    }\n    payload._ClientVersion = _CoreManager.default.get('VERSION');\n    var _options2 = options,\n      useMasterKey = _options2.useMasterKey;\n    if (typeof useMasterKey === 'undefined') {\n      useMasterKey = _CoreManager.default.get('USE_MASTER_KEY');\n    }\n    if (useMasterKey) {\n      if (_CoreManager.default.get('MASTER_KEY')) {\n        delete payload._JavaScriptKey;\n        payload._MasterKey = _CoreManager.default.get('MASTER_KEY');\n      }\n    }\n    if (_CoreManager.default.get('FORCE_REVOCABLE_SESSION')) {\n      payload._RevocableSession = '1';\n    }\n    var _options3 = options,\n      installationId = _options3.installationId;\n    var installationIdPromise;\n    if (installationId && typeof installationId === 'string') {\n      installationIdPromise = _promise.default.resolve(installationId);\n    } else {\n      var installationController = _CoreManager.default.getInstallationController();\n      installationIdPromise = installationController.currentInstallationId();\n    }\n    return installationIdPromise.then(function (iid) {\n      payload._InstallationId = iid;\n      var userController = _CoreManager.default.getUserController();\n      if (options && typeof options.sessionToken === 'string') {\n        return _promise.default.resolve(options.sessionToken);\n      }\n      if (userController) {\n        return userController.currentUserAsync().then(function (user) {\n          if (user) {\n            return _promise.default.resolve(user.getSessionToken());\n          }\n          return _promise.default.resolve(null);\n        });\n      }\n      return _promise.default.resolve(null);\n    }).then(function (token) {\n      if (token) {\n        payload._SessionToken = token;\n      }\n      var payloadString = (0, _stringify.default)(payload);\n      return RESTController.ajax(method, url, payloadString, {}, options).then(function (_ref) {\n        var response = _ref.response,\n          status = _ref.status;\n        if (options.returnStatus) {\n          return _objectSpread(_objectSpread({}, response), {}, {\n            _status: status\n          });\n        }\n        return response;\n      });\n    }).catch(RESTController.handleError);\n  },\n  handleError: function (response) {\n    // Transform the error into an instance of ParseError by trying to parse\n    // the error string as JSON\n    var error;\n    if (response && response.responseText) {\n      try {\n        var errorJSON = JSON.parse(response.responseText);\n        error = new _ParseError.default(errorJSON.code, errorJSON.error);\n      } catch (e) {\n        // If we fail to parse the error text, that's okay.\n        error = new _ParseError.default(_ParseError.default.INVALID_JSON, \"Received an error with invalid JSON from Parse: \".concat(response.responseText));\n      }\n    } else {\n      var message = response.message ? response.message : response;\n      error = new _ParseError.default(_ParseError.default.CONNECTION_FAILED, \"XMLHttpRequest failed: \".concat((0, _stringify.default)(message)));\n    }\n    return _promise.default.reject(error);\n  },\n  _setXHR: function (xhr\n  /*: any*/) {\n    XHR = xhr;\n  },\n  _getXHR: function () {\n    return XHR;\n  }\n};\nmodule.exports = RESTController;","map":{"version":3,"names":["_Object$keys","require","_Object$getOwnPropertySymbols","_filterInstanceProperty","_Object$getOwnPropertyDescriptor","_forEachInstanceProperty","_Object$getOwnPropertyDescriptors","_Object$defineProperties","_Object$defineProperty","_interopRequireDefault","_defineProperty2","_typeof2","_promise","_stringify","_includes","_setTimeout2","_concat","_CoreManager","_ParseError","_promiseUtils","ownKeys","object","enumerableOnly","keys","symbols","call","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","_context5","_context6","source","Object","key","default","_require","uuidv4","v4","XHR","XMLHttpRequest","useXDomainRequest","XDomainRequest","ajaxIE9","method","url","data","headers","options","resolve","reject","xdr","onload","response","JSON","parse","responseText","e","onerror","ontimeout","fakeResponse","code","X_DOMAIN_REQUEST","error","onprogress","progress","open","send","requestTask","RESTController","ajax","_context","promise","resolvingPromise","isIdempotent","get","requestId","attempts","dispatch","Error","handled","xhr","onreadystatechange","readyState","_aborted","status","getResponseHeader","_context2","getAllResponseHeaders","toString","delay","Math","round","random","pow","_context3","concat","process","versions","node","_context4","Authorization","customHeaders","handleProgress","type","event","lengthComputable","loaded","total","upload","h","setRequestHeader","onabort","results","request","path","payload","k","_options","context","undefined","_method","_ApplicationId","jsKey","_JavaScriptKey","_ClientVersion","_options2","useMasterKey","_MasterKey","_RevocableSession","_options3","installationId","installationIdPromise","installationController","getInstallationController","currentInstallationId","then","iid","_InstallationId","userController","getUserController","sessionToken","currentUserAsync","user","getSessionToken","token","_SessionToken","payloadString","_ref","returnStatus","_status","catch","handleError","errorJSON","INVALID_JSON","message","CONNECTION_FAILED","_setXHR","_getXHR","module","exports"],"sources":["/Users/shivamsoni/Desktop/router/pingspong/Ping-Pong/node_modules/moralis/lib/browser/RESTController.js"],"sourcesContent":["\"use strict\";\n\nvar _Object$keys = require(\"@babel/runtime-corejs3/core-js-stable/object/keys\");\n\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\");\n\nvar _filterInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\");\n\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\n\nvar _forEachInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\");\n\nvar _Object$getOwnPropertyDescriptors = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\");\n\nvar _Object$defineProperties = require(\"@babel/runtime-corejs3/core-js-stable/object/define-properties\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _setTimeout2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/set-timeout\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nvar _promiseUtils = require(\"./promiseUtils\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = _Object$keys(object);\n\n  if (_Object$getOwnPropertySymbols) {\n    var symbols = _Object$getOwnPropertySymbols(object);\n\n    enumerableOnly && (symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) {\n      return _Object$getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var _context5, _context6;\n\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? _forEachInstanceProperty(_context5 = ownKeys(Object(source), !0)).call(_context5, function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : _forEachInstanceProperty(_context6 = ownKeys(Object(source))).call(_context6, function (key) {\n      _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n/* global XMLHttpRequest, XDomainRequest */\n\n\nvar _require = require('uuid'),\n    uuidv4 = _require.v4;\n\nvar XHR = null;\n\nif (typeof XMLHttpRequest !== 'undefined') {\n  XHR = XMLHttpRequest;\n}\n\nvar useXDomainRequest = false;\n\nif (typeof XDomainRequest !== 'undefined' && !('withCredentials' in new XMLHttpRequest())) {\n  useXDomainRequest = true;\n}\n\nfunction ajaxIE9(method\n/*: string*/\n, url\n/*: string*/\n, data\n/*: any*/\n, headers\n/*:: ?: any*/\n, options\n/*:: ?: FullOptions*/\n) {\n  return new _promise.default(function (resolve, reject) {\n    var xdr = new XDomainRequest();\n\n    xdr.onload = function () {\n      var response;\n\n      try {\n        response = JSON.parse(xdr.responseText);\n      } catch (e) {\n        reject(e);\n      }\n\n      if (response) {\n        resolve({\n          response: response\n        });\n      }\n    };\n\n    xdr.onerror = xdr.ontimeout = function () {\n      // Let's fake a real error message.\n      var fakeResponse = {\n        responseText: (0, _stringify.default)({\n          code: _ParseError.default.X_DOMAIN_REQUEST,\n          error: \"IE's XDomainRequest does not supply error info.\"\n        })\n      };\n      reject(fakeResponse);\n    };\n\n    xdr.onprogress = function () {\n      if (options && typeof options.progress === 'function') {\n        options.progress(xdr.responseText);\n      }\n    };\n\n    xdr.open(method, url);\n    xdr.send(data);\n\n    if (options && typeof options.requestTask === 'function') {\n      options.requestTask(xdr);\n    }\n  });\n}\n\nvar RESTController = {\n  ajax: function (method\n  /*: string*/\n  , url\n  /*: string*/\n  , data\n  /*: any*/\n  , headers\n  /*:: ?: any*/\n  , options\n  /*:: ?: FullOptions*/\n  ) {\n    var _context;\n\n    if (useXDomainRequest) {\n      return ajaxIE9(method, url, data, headers, options);\n    }\n\n    var promise = (0, _promiseUtils.resolvingPromise)();\n    var isIdempotent = _CoreManager.default.get('IDEMPOTENCY') && (0, _includes.default)(_context = ['POST', 'PUT']).call(_context, method);\n    var requestId = isIdempotent ? uuidv4() : '';\n    var attempts = 0;\n\n    var dispatch = function dispatch() {\n      if (XHR == null) {\n        throw new Error('Cannot make a request: No definition of XMLHttpRequest was found.');\n      }\n\n      var handled = false;\n      var xhr = new XHR();\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState !== 4 || handled || xhr._aborted) {\n          return;\n        }\n\n        handled = true;\n\n        if (xhr.status >= 200 && xhr.status < 300) {\n          var response;\n\n          try {\n            response = JSON.parse(xhr.responseText);\n\n            if (typeof xhr.getResponseHeader === 'function') {\n              var _context2;\n\n              if ((0, _includes.default)(_context2 = xhr.getAllResponseHeaders() || '').call(_context2, 'x-parse-job-status-id: ')) {\n                response = xhr.getResponseHeader('x-parse-job-status-id');\n              }\n            }\n          } catch (e) {\n            promise.reject(e.toString());\n          }\n\n          if (response) {\n            promise.resolve({\n              response: response,\n              status: xhr.status,\n              xhr: xhr\n            });\n          }\n        } else if (xhr.status >= 500 || xhr.status === 0) {\n          // retry on 5XX or node-xmlhttprequest error\n          if (++attempts < _CoreManager.default.get('REQUEST_ATTEMPT_LIMIT')) {\n            // Exponentially-growing random delay\n            var delay = Math.round(Math.random() * 125 * Math.pow(2, attempts));\n            (0, _setTimeout2.default)(dispatch, delay);\n          } else if (xhr.status === 0) {\n            promise.reject('Unable to connect to the Parse API');\n          } else {\n            // After the retry limit is reached, fail\n            promise.reject(xhr);\n          }\n        } else {\n          promise.reject(xhr);\n        }\n      };\n\n      headers = headers || {};\n\n      if (typeof headers['Content-Type'] !== 'string') {\n        // Avoid pre-flight\n        headers['Content-Type'] = 'text/plain';\n      }\n\n      if (_CoreManager.default.get('IS_NODE')) {\n        var _context3;\n\n        headers['User-Agent'] = (0, _concat.default)(_context3 = \"Parse/\".concat(_CoreManager.default.get('VERSION'), \" (NodeJS \")).call(_context3, process.versions.node, \")\");\n      }\n\n      if (isIdempotent) {\n        headers['X-Parse-Request-Id'] = requestId;\n      }\n\n      if (_CoreManager.default.get('SERVER_AUTH_TYPE') && _CoreManager.default.get('SERVER_AUTH_TOKEN')) {\n        var _context4;\n\n        headers.Authorization = (0, _concat.default)(_context4 = \"\".concat(_CoreManager.default.get('SERVER_AUTH_TYPE'), \" \")).call(_context4, _CoreManager.default.get('SERVER_AUTH_TOKEN'));\n      }\n\n      var customHeaders = _CoreManager.default.get('REQUEST_HEADERS');\n\n      for (var key in customHeaders) {\n        headers[key] = customHeaders[key];\n      }\n\n      function handleProgress(type, event) {\n        if (options && typeof options.progress === 'function') {\n          if (event.lengthComputable) {\n            options.progress(event.loaded / event.total, event.loaded, event.total, {\n              type: type\n            });\n          } else {\n            options.progress(null, null, null, {\n              type: type\n            });\n          }\n        }\n      }\n\n      xhr.onprogress = function (event) {\n        handleProgress('download', event);\n      };\n\n      if (xhr.upload) {\n        xhr.upload.onprogress = function (event) {\n          handleProgress('upload', event);\n        };\n      }\n\n      xhr.open(method, url, true);\n\n      for (var h in headers) {\n        xhr.setRequestHeader(h, headers[h]);\n      }\n\n      xhr.onabort = function () {\n        promise.resolve({\n          response: {\n            results: []\n          },\n          status: 0,\n          xhr: xhr\n        });\n      };\n\n      xhr.send(data);\n\n      if (options && typeof options.requestTask === 'function') {\n        options.requestTask(xhr);\n      }\n    };\n\n    dispatch();\n    return promise;\n  },\n  request: function (method\n  /*: string*/\n  , path\n  /*: string*/\n  , data\n  /*: mixed*/\n  , options\n  /*:: ?: RequestOptions*/\n  ) {\n    options = options || {};\n\n    var url = _CoreManager.default.get('SERVER_URL');\n\n    if (url[url.length - 1] !== '/') {\n      url += '/';\n    }\n\n    url += path;\n    var payload = {};\n\n    if (data && (0, _typeof2.default)(data) === 'object') {\n      for (var k in data) {\n        payload[k] = data[k];\n      }\n    } // Add context\n\n\n    var _options = options,\n        context = _options.context;\n\n    if (context !== undefined) {\n      payload._context = context;\n    }\n\n    if (method !== 'POST') {\n      payload._method = method;\n      method = 'POST';\n    }\n\n    payload._ApplicationId = _CoreManager.default.get('APPLICATION_ID');\n\n    var jsKey = _CoreManager.default.get('JAVASCRIPT_KEY');\n\n    if (jsKey) {\n      payload._JavaScriptKey = jsKey;\n    }\n\n    payload._ClientVersion = _CoreManager.default.get('VERSION');\n    var _options2 = options,\n        useMasterKey = _options2.useMasterKey;\n\n    if (typeof useMasterKey === 'undefined') {\n      useMasterKey = _CoreManager.default.get('USE_MASTER_KEY');\n    }\n\n    if (useMasterKey) {\n      if (_CoreManager.default.get('MASTER_KEY')) {\n        delete payload._JavaScriptKey;\n        payload._MasterKey = _CoreManager.default.get('MASTER_KEY');\n      }\n    }\n\n    if (_CoreManager.default.get('FORCE_REVOCABLE_SESSION')) {\n      payload._RevocableSession = '1';\n    }\n\n    var _options3 = options,\n        installationId = _options3.installationId;\n    var installationIdPromise;\n\n    if (installationId && typeof installationId === 'string') {\n      installationIdPromise = _promise.default.resolve(installationId);\n    } else {\n      var installationController = _CoreManager.default.getInstallationController();\n\n      installationIdPromise = installationController.currentInstallationId();\n    }\n\n    return installationIdPromise.then(function (iid) {\n      payload._InstallationId = iid;\n\n      var userController = _CoreManager.default.getUserController();\n\n      if (options && typeof options.sessionToken === 'string') {\n        return _promise.default.resolve(options.sessionToken);\n      }\n\n      if (userController) {\n        return userController.currentUserAsync().then(function (user) {\n          if (user) {\n            return _promise.default.resolve(user.getSessionToken());\n          }\n\n          return _promise.default.resolve(null);\n        });\n      }\n\n      return _promise.default.resolve(null);\n    }).then(function (token) {\n      if (token) {\n        payload._SessionToken = token;\n      }\n\n      var payloadString = (0, _stringify.default)(payload);\n      return RESTController.ajax(method, url, payloadString, {}, options).then(function (_ref) {\n        var response = _ref.response,\n            status = _ref.status;\n\n        if (options.returnStatus) {\n          return _objectSpread(_objectSpread({}, response), {}, {\n            _status: status\n          });\n        }\n\n        return response;\n      });\n    }).catch(RESTController.handleError);\n  },\n  handleError: function (response) {\n    // Transform the error into an instance of ParseError by trying to parse\n    // the error string as JSON\n    var error;\n\n    if (response && response.responseText) {\n      try {\n        var errorJSON = JSON.parse(response.responseText);\n        error = new _ParseError.default(errorJSON.code, errorJSON.error);\n      } catch (e) {\n        // If we fail to parse the error text, that's okay.\n        error = new _ParseError.default(_ParseError.default.INVALID_JSON, \"Received an error with invalid JSON from Parse: \".concat(response.responseText));\n      }\n    } else {\n      var message = response.message ? response.message : response;\n      error = new _ParseError.default(_ParseError.default.CONNECTION_FAILED, \"XMLHttpRequest failed: \".concat((0, _stringify.default)(message)));\n    }\n\n    return _promise.default.reject(error);\n  },\n  _setXHR: function (xhr\n  /*: any*/\n  ) {\n    XHR = xhr;\n  },\n  _getXHR: function () {\n    return XHR;\n  }\n};\nmodule.exports = RESTController;"],"mappings":"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"},"metadata":{},"sourceType":"script"}