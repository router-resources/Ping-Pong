{"ast":null,"code":"import { getError, getErrorByCode, isReservedErrorCode } from \"./error\";\nimport { INTERNAL_ERROR, SERVER_ERROR } from \"./constants\";\nexport function payloadId() {\n  const date = Date.now() * Math.pow(10, 3);\n  const extra = Math.floor(Math.random() * Math.pow(10, 3));\n  return date + extra;\n}\nexport function formatJsonRpcRequest(method, params, id) {\n  return {\n    id: id || payloadId(),\n    jsonrpc: \"2.0\",\n    method,\n    params\n  };\n}\nexport function formatJsonRpcResult(id, result) {\n  return {\n    id,\n    jsonrpc: \"2.0\",\n    result\n  };\n}\nexport function formatJsonRpcError(id, error) {\n  return {\n    id,\n    jsonrpc: \"2.0\",\n    error: formatErrorMessage(error)\n  };\n}\nexport function formatErrorMessage(error) {\n  if (typeof error === \"undefined\") {\n    return getError(INTERNAL_ERROR);\n  }\n  if (typeof error === \"string\") {\n    error = Object.assign(Object.assign({}, getError(SERVER_ERROR)), {\n      message: error\n    });\n  }\n  if (isReservedErrorCode(error.code)) {\n    error = getErrorByCode(error.code);\n  }\n  return error;\n}","map":{"version":3,"mappings":"AAAA,SAASA,QAAQ,EAAEC,cAAc,EAAEC,mBAAmB,QAA2B,SAAS;AAC1F,SAASC,cAAc,EAAEC,YAAY,QAAQ,aAAa;AAG1D,OAAM,SAAUC,SAAS;EACvB,MAAMC,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;EACzC,MAAMC,KAAK,GAAGF,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,EAAE,GAAGJ,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;EACzD,OAAOJ,IAAI,GAAGK,KAAK;AACrB;AAEA,OAAM,SAAUG,oBAAoB,CAClCC,MAAc,EACdC,MAAS,EACTC,EAAW;EAEX,OAAO;IACLA,EAAE,EAAEA,EAAE,IAAIZ,SAAS,EAAE;IACrBa,OAAO,EAAE,KAAK;IACdH,MAAM;IACNC;GACD;AACH;AAEA,OAAM,SAAUG,mBAAmB,CAAUF,EAAU,EAAEG,MAAS;EAChE,OAAO;IACLH,EAAE;IACFC,OAAO,EAAE,KAAK;IACdE;GACD;AACH;AAEA,OAAM,SAAUC,kBAAkB,CAACJ,EAAU,EAAEK,KAA8B;EAC3E,OAAO;IACLL,EAAE;IACFC,OAAO,EAAE,KAAK;IACdI,KAAK,EAAEC,kBAAkB,CAACD,KAAK;GAChC;AACH;AAEA,OAAM,SAAUC,kBAAkB,CAACD,KAA8B;EAC/D,IAAI,OAAOA,KAAK,KAAK,WAAW,EAAE;IAChC,OAAOtB,QAAQ,CAACG,cAAc,CAAC;;EAEjC,IAAI,OAAOmB,KAAK,KAAK,QAAQ,EAAE;IAC7BA,KAAK,mCACAtB,QAAQ,CAACI,YAAY,CAAC;MACzBoB,OAAO,EAAEF;IAAK,EACf;;EAEH,IAAIpB,mBAAmB,CAACoB,KAAK,CAACG,IAAI,CAAC,EAAE;IACnCH,KAAK,GAAGrB,cAAc,CAACqB,KAAK,CAACG,IAAI,CAAC;;EAEpC,OAAOH,KAAK;AACd","names":["getError","getErrorByCode","isReservedErrorCode","INTERNAL_ERROR","SERVER_ERROR","payloadId","date","Date","now","Math","pow","extra","floor","random","formatJsonRpcRequest","method","params","id","jsonrpc","formatJsonRpcResult","result","formatJsonRpcError","error","formatErrorMessage","message","code"],"sourceRoot":"","sources":["../../src/format.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}