{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWindowMetadata = void 0;\nconst window_getters_1 = require(\"@walletconnect/window-getters\");\nfunction getWindowMetadata() {\n  let doc;\n  let loc;\n  try {\n    doc = window_getters_1.getDocumentOrThrow();\n    loc = window_getters_1.getLocationOrThrow();\n  } catch (e) {\n    return null;\n  }\n  function getIcons() {\n    const links = doc.getElementsByTagName(\"link\");\n    const icons = [];\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i];\n      const rel = link.getAttribute(\"rel\");\n      if (rel) {\n        if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n          const href = link.getAttribute(\"href\");\n          if (href) {\n            if (href.toLowerCase().indexOf(\"https:\") === -1 && href.toLowerCase().indexOf(\"http:\") === -1 && href.indexOf(\"//\") !== 0) {\n              let absoluteHref = loc.protocol + \"//\" + loc.host;\n              if (href.indexOf(\"/\") === 0) {\n                absoluteHref += href;\n              } else {\n                const path = loc.pathname.split(\"/\");\n                path.pop();\n                const finalPath = path.join(\"/\");\n                absoluteHref += finalPath + \"/\" + href;\n              }\n              icons.push(absoluteHref);\n            } else if (href.indexOf(\"//\") === 0) {\n              const absoluteUrl = loc.protocol + href;\n              icons.push(absoluteUrl);\n            } else {\n              icons.push(href);\n            }\n          }\n        }\n      }\n    }\n    return icons;\n  }\n  function getWindowMetadataOfAny() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const metaTags = doc.getElementsByTagName(\"meta\");\n    for (let i = 0; i < metaTags.length; i++) {\n      const tag = metaTags[i];\n      const attributes = [\"itemprop\", \"property\", \"name\"].map(target => tag.getAttribute(target)).filter(attr => {\n        if (attr) {\n          return args.includes(attr);\n        }\n        return false;\n      });\n      if (attributes.length && attributes) {\n        const content = tag.getAttribute(\"content\");\n        if (content) {\n          return content;\n        }\n      }\n    }\n    return \"\";\n  }\n  function getName() {\n    let name = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n    if (!name) {\n      name = doc.title;\n    }\n    return name;\n  }\n  function getDescription() {\n    const description = getWindowMetadataOfAny(\"description\", \"og:description\", \"twitter:description\", \"keywords\");\n    return description;\n  }\n  const name = getName();\n  const description = getDescription();\n  const url = loc.origin;\n  const icons = getIcons();\n  const meta = {\n    description,\n    url,\n    icons,\n    name\n  };\n  return meta;\n}\nexports.getWindowMetadata = getWindowMetadata;","map":{"version":3,"mappings":"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","names":["getWindowMetadata","doc","loc","window_getters_1","e","getIcons","links","getElementsByTagName","icons","i","length","link","rel","getAttribute","toLowerCase","indexOf","href","absoluteHref","protocol","host","path","pathname","split","pop","finalPath","join","push","absoluteUrl","getWindowMetadataOfAny","args","metaTags","tag","attributes","map","target","filter","attr","includes","content","getName","name","title","getDescription","description","url","origin","meta","exports"],"sourceRoot":"","sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}