{"version":3,"file":"phantomAdapter.esm.js","sources":["../src/utils.ts","../src/phantomAdapter.ts"],"sourcesContent":[null,null],"names":["poll","callback","interval","count","Promise","resolve","reject","setTimeout","done","then","res","catch","err","detectProvider","options","isPhantomAvailable","window","solana","isPhantom","isAvailable","PhantomAdapter","BaseAdapter","constructor","WALLET_ADAPTERS","PHANTOM","ADAPTER_NAMESPACES","SOLANA","CHAIN_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","ADAPTER_STATUS","NOT_READY","_wallet","off","_onDisconnect","rehydrated","status","CONNECTED","READY","emit","ADAPTER_EVENTS","DISCONNECTED","chainConfig","isWalletConnected","isConnected","provider","phantomProvider","_","Error","setAdapterSettings","init","checkInitializationRequirements","getChainConfig","WalletInitializationError","notInstalled","PhantomInjectedProvider","config","autoConnect","connect","error","log","checkConnectionRequirements","CONNECTING","adapter","handleDisconnect","_handleDisconnect","connectWithProvider","once","windowClosed","args","apply","reason","Web3AuthError","WalletLoginError","connectionError","message","publicKey","on","ERRORED","disconnect","cleanup","notConnectedError","disconnectionError","getUserInfo","injectedProvider","setupProvider","reconnected"],"mappings":"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"}