{"version":3,"sources":["webpack://BaseProvider/webpack/bootstrap","webpack://BaseProvider/external \"@web3auth/base\"","webpack://BaseProvider/external \"eth-rpc-errors\"","webpack://BaseProvider/external \"@babel/runtime/helpers/defineProperty\"","webpack://BaseProvider/external \"@toruslabs/base-controllers\"","webpack://BaseProvider/external \"json-rpc-random-id\"","webpack://BaseProvider/./src/baseProvider.ts","webpack://BaseProvider/./src/utils.ts","webpack://BaseProvider/./src/index.ts"],"names":["BaseProvider","BaseController","constructor","config","state","chainConfig","WalletInitializationError","invalidProviderConfigError","chainId","rpcTarget","defaultState","defaultConfig","networks","initialize","provider","_providerEngineProxy","_","Error","addChain","ethErrors","rpc","invalidParams","configure","getChainConfig","invalidRequest","getProviderEngineProxy","updateProviderEngineProxy","providerEngineProxy","setTarget","createEventEmitterProxy","createRandomId","getCreateRandomId"],"mappings":"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","file":"baseProvider.cjs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = require(\"@web3auth/base\");","module.exports = require(\"eth-rpc-errors\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@toruslabs/base-controllers\");","module.exports = require(\"json-rpc-random-id\");","import { BaseConfig, BaseController, BaseState, createEventEmitterProxy, SafeEventEmitterProvider } from \"@toruslabs/base-controllers\";\nimport { CustomChainConfig, WalletInitializationError } from \"@web3auth/base\";\nimport { ethErrors } from \"eth-rpc-errors\";\n\nimport { IBaseProvider } from \"./IBaseProvider\";\n\nexport interface BaseProviderState extends BaseState {\n  chainId: string;\n}\n\nexport interface BaseProviderConfig extends BaseConfig {\n  chainConfig: Partial<CustomChainConfig>;\n  networks?: Record<string, CustomChainConfig>;\n}\n\nexport abstract class BaseProvider<C extends BaseProviderConfig, S extends BaseProviderState, P>\n  extends BaseController<C, S>\n  implements IBaseProvider<P>\n{\n  // should be Assigned in setupProvider\n  public _providerEngineProxy: SafeEventEmitterProvider | null = null;\n\n  constructor({ config, state }: { config: C; state?: S }) {\n    super({ config, state });\n    if (!config.chainConfig) throw WalletInitializationError.invalidProviderConfigError(\"Please provide chainConfig\");\n    if (!config.chainConfig.chainId) throw WalletInitializationError.invalidProviderConfigError(\"Please provide chainId inside chainConfig\");\n    if (!config.chainConfig.rpcTarget) throw WalletInitializationError.invalidProviderConfigError(\"Please provide rpcTarget inside chainConfig\");\n    this.defaultState = {\n      chainId: \"loading\",\n    } as S;\n    this.defaultConfig = {\n      chainConfig: config.chainConfig,\n      networks: { [config.chainConfig.chainId]: config.chainConfig },\n    } as C;\n    super.initialize();\n  }\n\n  get provider(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  set provider(_) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public addChain(chainConfig: CustomChainConfig): void {\n    if (!chainConfig.chainId) throw ethErrors.rpc.invalidParams(\"chainId is required\");\n    if (!chainConfig.rpcTarget) throw ethErrors.rpc.invalidParams(\"chainId is required\");\n    this.configure({\n      networks: { ...this.config.networks, [chainConfig.chainId]: chainConfig },\n    } as C);\n  }\n\n  public getChainConfig(chainId: string): CustomChainConfig | null {\n    const chainConfig = this.config.networks?.[chainId];\n    if (!chainConfig) throw ethErrors.rpc.invalidRequest(`Chain ${chainId} is not supported, please add chainConfig for it`);\n    return chainConfig;\n  }\n\n  protected getProviderEngineProxy(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  protected updateProviderEngineProxy(providerEngineProxy: SafeEventEmitterProvider) {\n    if (this._providerEngineProxy) {\n      (this._providerEngineProxy as any).setTarget(providerEngineProxy);\n    } else {\n      this._providerEngineProxy = createEventEmitterProxy<SafeEventEmitterProvider>(providerEngineProxy);\n    }\n  }\n\n  abstract setupProvider(provider: P): Promise<void>;\n\n  abstract switchChain(params: { chainId: string }): Promise<void>;\n\n  protected abstract lookupNetwork(provider?: P): Promise<string | void>;\n}\n","import getCreateRandomId from \"json-rpc-random-id\";\nexport const createRandomId = getCreateRandomId();\n","export * from \"./baseProvider\";\nexport * from \"./IBaseProvider\";\nexport * from \"./utils\";\n"],"sourceRoot":""}